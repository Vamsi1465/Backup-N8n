{
  "createdAt": "2025-10-16T20:40:37.799Z",
  "updatedAt": "2025-10-22T14:35:29.000Z",
  "id": "SgrltZpXrYU9K7PP",
  "name": "Avatar Generator using(heygen and submagic)",
  "active": false,
  "isArchived": false,
  "nodes": [
    {
      "parameters": {
        "url": "https://api.heygen.com/v1/video_status.get",
        "authentication": "genericCredentialType",
        "genericAuthType": "httpHeaderAuth",
        "sendQuery": true,
        "queryParameters": {
          "parameters": [
            {
              "name": "video_id",
              "value": "={{ $('Generate HeyGen Video').item.json.data.video_id }}"
            }
          ]
        },
        "sendHeaders": true,
        "headerParameters": {
          "parameters": [
            {
              "name": "accept",
              "value": "application/json"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [
        -352,
        704
      ],
      "id": "ca4c0b09-9e23-407e-99c7-6c4f8c15393f",
      "name": "Fetch HeyGen Video",
      "credentials": {
        "httpHeaderAuth": {
          "id": "5dvuaQ8vpI7oZeTg",
          "name": "Header Auth account"
        }
      }
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict",
            "version": 2
          },
          "conditions": [
            {
              "id": "debd88fe-d327-4edd-8717-ba8b50c3fe84",
              "leftValue": "={{ $json.data.status }}",
              "rightValue": "completed",
              "operator": {
                "type": "string",
                "operation": "equals",
                "name": "filter.operator.equals"
              }
            }
          ],
          "combinator": "and"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.if",
      "typeVersion": 2.2,
      "position": [
        -160,
        704
      ],
      "id": "b54eef15-e4c1-4fcd-bfae-b2acab2fbd58",
      "name": "If Status = Complete"
    },
    {
      "parameters": {
        "operation": "createFromText",
        "content": "={{ $('Clean up Editor\\'s Script & Prompts').item.json.body }}",
        "name": "=Editor's Doc ( {{ $('On form submission').item.json['Title your video (What\\'s it about?)'] }})",
        "driveId": {
          "__rl": true,
          "value": "My Drive",
          "mode": "list",
          "cachedResultName": "My Drive",
          "cachedResultUrl": "https://drive.google.com/drive/my-drive"
        },
        "folderId": {
          "__rl": true,
          "value": "1P_Kgz1vVHSDisZ8gBxEvWxqJW1KRM5Vt",
          "mode": "list",
          "cachedResultName": "n8n",
          "cachedResultUrl": "https://drive.google.com/drive/folders/1P_Kgz1vVHSDisZ8gBxEvWxqJW1KRM5Vt"
        },
        "options": {
          "convertToGoogleDocument": true
        }
      },
      "type": "n8n-nodes-base.googleDrive",
      "typeVersion": 3,
      "position": [
        432,
        608
      ],
      "id": "d76405f5-4c00-4370-9f83-fb28c2967aa7",
      "name": "Create Editor's Doc",
      "credentials": {
        "googleDriveOAuth2Api": {
          "id": "pqwDBXzX6aAkWb7p",
          "name": "Google Drive account"
        }
      }
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "5217fd22-f18f-4401-870c-04eada9f3a00",
              "name": "Editor's Doc Link",
              "value": "=https://docs.google.com/document/d/{{ $json.id }}",
              "type": "string"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        624,
        608
      ],
      "id": "69232457-5051-46fe-ab19-699066e91b4b",
      "name": "Copy Editor Doc's Link"
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "de8566cb-c394-4229-869c-8479c3ae997a",
              "name": "Editor's Script",
              "value": "={{ $json.output.editor_script }}",
              "type": "string"
            },
            {
              "id": "59b0a2c6-4e87-4f38-82eb-c4b1b4be223a",
              "name": "Library Shots Prompt",
              "value": "={{ $json.output.library_shots }}",
              "type": "string"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        1200,
        272
      ],
      "id": "7256036b-99ee-474b-83d2-8a9b355d56de",
      "name": "Separate Editor's Script & Prompts"
    },
    {
      "parameters": {
        "jsCode": "const editorScript = $input.first().json[\"Editor's Script\"];\nconst libraryShots = $input.first().json[\"Library Shots Prompt\"];\n\nlet formatted = \"**Editorâ€™s Script:**\\n\\n\";\nformatted += editorScript + \"\\n\\n\";\n\nformatted += \"**Library Shots Prompt:**\\n\\n\";\ntry {\n  const shots = JSON.parse(libraryShots);\n  shots.forEach(shot => {\n    formatted += `Shot ${shot.shot_number} (${shot.timing}):\\n`;\n    formatted += `${shot.prompt}\\n\\n`;\n  });\n} catch (err) {\n  formatted += libraryShots + \"\\n\\n\";\n}\n\nreturn [{ json: { body: formatted.trim() } }];\n"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        1360,
        272
      ],
      "id": "250d63e6-2d92-4c52-87fd-5230727b0e98",
      "name": "Clean up Editor's Script & Prompts"
    },
    {
      "parameters": {
        "operation": "append",
        "documentId": {
          "__rl": true,
          "value": "1uJ5oBbNfINC9GZCiF-GUUIWcA41m-a2Our3wzed0Tk8",
          "mode": "list",
          "cachedResultName": "HeyGen Test",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1uJ5oBbNfINC9GZCiF-GUUIWcA41m-a2Our3wzed0Tk8/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": "gid=0",
          "mode": "list",
          "cachedResultName": "Sheet1",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1uJ5oBbNfINC9GZCiF-GUUIWcA41m-a2Our3wzed0Tk8/edit#gid=0"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "Post Title": "={{ $('On form submission').item.json['Title your video (What\\'s it about?)'] }}",
            "AI Avatar Video Link": "={{ $('Fetch HeyGen Video').item.json.data.video_url }}",
            "Video Script": "={{ $('Script Writer').item.json.output }}",
            "Editor's Doc": "={{ $json['Editor\\'s Doc Link'] }}"
          },
          "matchingColumns": [],
          "schema": [
            {
              "id": "Post Title",
              "displayName": "Post Title",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "AI Avatar Video Link",
              "displayName": "AI Avatar Video Link",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "Video Script",
              "displayName": "Video Script",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "Editor's Doc",
              "displayName": "Editor's Doc",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.6,
      "position": [
        832,
        608
      ],
      "id": "1e33ebc7-9b1a-423d-9a75-f0da8d8f966b",
      "name": "Append row in sheet",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "3MsYFPOz6gYs3lBk",
          "name": "Google Sheets account"
        }
      }
    },
    {
      "parameters": {
        "content": "# Script Writer ",
        "height": 560,
        "width": 560,
        "color": 5
      },
      "type": "n8n-nodes-base.stickyNote",
      "typeVersion": 1,
      "position": [
        -336,
        -128
      ],
      "id": "e3b5f92b-b195-4d4d-b71a-2a8e54227d44",
      "name": "Sticky Note3"
    },
    {
      "parameters": {
        "content": "# Video Creation\n## by HeyGen",
        "height": 432,
        "width": 1328,
        "color": 6
      },
      "type": "n8n-nodes-base.stickyNote",
      "typeVersion": 1,
      "position": [
        -1104,
        560
      ],
      "id": "4dd23ba1-c8b9-428c-b033-ce6e05c024af",
      "name": "Sticky Note4"
    },
    {
      "parameters": {
        "content": "# Creating Doc & Updates",
        "height": 272,
        "width": 944,
        "color": 4
      },
      "type": "n8n-nodes-base.stickyNote",
      "typeVersion": 1,
      "position": [
        368,
        528
      ],
      "id": "05fb04f3-091b-4596-b9a7-2cc692975ec5",
      "name": "Sticky Note5"
    },
    {
      "parameters": {},
      "type": "n8n-nodes-base.noOp",
      "typeVersion": 1,
      "position": [
        1024,
        608
      ],
      "id": "6346dc74-a33b-4127-a72f-b9fe9c9562e0",
      "name": "No Operation, do nothing"
    },
    {
      "parameters": {
        "content": "# Data Clean up",
        "height": 352,
        "width": 512,
        "color": 7
      },
      "type": "n8n-nodes-base.stickyNote",
      "typeVersion": 1,
      "position": [
        1120,
        112
      ],
      "id": "0877304b-a3c9-46fb-b62d-ac638f80b869",
      "name": "Sticky Note7"
    },
    {
      "parameters": {
        "amount": 2,
        "unit": "minutes"
      },
      "type": "n8n-nodes-base.wait",
      "typeVersion": 1.1,
      "position": [
        -608,
        704
      ],
      "id": "54616ff1-889c-4813-868d-11e310267b82",
      "name": "Wait for 30 secs",
      "webhookId": "c291ad1e-f260-44ce-b3ee-078cff9b1bf6"
    },
    {
      "parameters": {
        "method": "POST",
        "url": "https://api.heygen.com/v2/video/generate",
        "authentication": "genericCredentialType",
        "genericAuthType": "httpHeaderAuth",
        "sendHeaders": true,
        "headerParameters": {
          "parameters": [
            {
              "name": "accept",
              "value": "application/json"
            }
          ]
        },
        "sendBody": true,
        "specifyBody": "json",
        "jsonBody": "={\n  \"video_inputs\": [\n    {\n      \"character\": {\n        \"type\": \"avatar\",\n        \"avatar_id\": \"{{ $json.data.id }}\",\n        \"avatar_style\": \"normal\"\n      },\n      \"voice\": {\n        \"type\": \"text\",\n        \"input_text\": \"{{ $('Script Generator').item.json.output }}\",\n        \"voice_id\": \"4ecb08e33f7f4259bd544aaeae2fd946\",\n        \"speed\": 1.1\n      }\n    }\n  ],\n  \"dimension\": {\n    \"width\": 720,\n    \"height\": 1280\n  }\n}",
        "options": {}
      },
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [
        -784,
        704
      ],
      "id": "d2c1900c-0c8c-4e97-8952-7920ec11aaf6",
      "name": "Generate HeyGen Video",
      "credentials": {
        "httpHeaderAuth": {
          "id": "5dvuaQ8vpI7oZeTg",
          "name": "Header Auth account"
        }
      }
    },
    {
      "parameters": {
        "method": "POST",
        "url": "https://api.submagic.co/v1/projects",
        "authentication": "genericCredentialType",
        "genericAuthType": "httpHeaderAuth",
        "sendBody": true,
        "specifyBody": "json",
        "jsonBody": "={\n    \"title\": \"My Awesome Video\",\n    \"language\": \"en\",\n    \"videoUrl\": \"{{ $json.data.video_url }}\",\n    \"templateName\": \"Hormozi 2\",\n    \"dictionary\": [\"Submagic\", \"AI-powered\", \"captions\"],\n    \"magicZooms\": true,\n    \"magicBrolls\": true,\n    \"magicBrollsPercentage\": 75,\n    \"removeSilencePace\": \"fast\",\n    \"removeBadTakes\": true\n  }",
        "options": {}
      },
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [
        -1008,
        1264
      ],
      "id": "603bb95a-7466-4c68-a9f6-f67da4cebf69",
      "name": "HTTP Request1",
      "credentials": {
        "httpHeaderAuth": {
          "id": "CezkIXyqm1175DXL",
          "name": "Submagic"
        }
      }
    },
    {
      "parameters": {
        "url": "=https://api.submagic.co/v1/projects/{{ $json.id }}",
        "authentication": "genericCredentialType",
        "genericAuthType": "httpHeaderAuth",
        "options": {}
      },
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [
        -592,
        1264
      ],
      "id": "bcc66622-38bf-4908-a8cc-e0e839c63bf2",
      "name": "HTTP Request2",
      "credentials": {
        "httpHeaderAuth": {
          "id": "CezkIXyqm1175DXL",
          "name": "Submagic"
        }
      }
    },
    {
      "parameters": {
        "rules": {
          "values": [
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 2
                },
                "conditions": [
                  {
                    "leftValue": "={{ $json.status }}",
                    "rightValue": "processing",
                    "operator": {
                      "type": "string",
                      "operation": "equals"
                    },
                    "id": "55999c9a-c72a-4f00-8a24-86a6b5d7a7a3"
                  }
                ],
                "combinator": "and"
              },
              "renameOutput": true,
              "outputKey": "processing"
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 2
                },
                "conditions": [
                  {
                    "id": "f5d71449-b820-4c3a-944e-f8311828105b",
                    "leftValue": "={{ $json.status }}",
                    "rightValue": "completed",
                    "operator": {
                      "type": "string",
                      "operation": "equals",
                      "name": "filter.operator.equals"
                    }
                  }
                ],
                "combinator": "and"
              },
              "renameOutput": true,
              "outputKey": "completed"
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 2
                },
                "conditions": [
                  {
                    "id": "03ac8fef-c5b9-4ac8-aa7a-ebbb510040d3",
                    "leftValue": "={{ $json.status }}",
                    "rightValue": "=failed",
                    "operator": {
                      "type": "string",
                      "operation": "equals",
                      "name": "filter.operator.equals"
                    }
                  }
                ],
                "combinator": "and"
              },
              "renameOutput": true,
              "outputKey": "failed"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.switch",
      "typeVersion": 3.2,
      "position": [
        -384,
        1248
      ],
      "id": "b541ba57-d62b-453b-ba82-d905f0c2a2db",
      "name": "Switch"
    },
    {
      "parameters": {
        "amount": 1,
        "unit": "minutes"
      },
      "type": "n8n-nodes-base.wait",
      "typeVersion": 1.1,
      "position": [
        -816,
        1264
      ],
      "id": "841d67d9-d304-46dc-b1d1-6c301b5a871d",
      "name": "Wait",
      "webhookId": "30cf877f-28a6-4a9d-b83c-3626dcbd6bba"
    },
    {
      "parameters": {
        "url": "={{ $json.downloadUrl }}",
        "authentication": "genericCredentialType",
        "genericAuthType": "httpHeaderAuth",
        "options": {}
      },
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [
        -128,
        1264
      ],
      "id": "bc90fe75-355f-4ce1-b182-bd300f7e5bf3",
      "name": "HTTP Request3",
      "credentials": {
        "httpHeaderAuth": {
          "id": "CezkIXyqm1175DXL",
          "name": "Submagic"
        }
      }
    },
    {
      "parameters": {
        "url": "https://api.heygen.com/v2/avatar/c74c046395214816bf98d90f60fd7395/details",
        "sendHeaders": true,
        "headerParameters": {
          "parameters": [
            {
              "name": "accept",
              "value": "application/json"
            },
            {
              "name": "x-api-key",
              "value": "sk_V2_hgu_kPLqC70q5IB_DZs0FeJZ3PiMVBlOM0hnzmCokakxJYRd"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [
        -1040,
        704
      ],
      "id": "86e890e9-1643-4a25-8b0f-475223330c42",
      "name": "HTTP Request5"
    },
    {
      "parameters": {
        "modelName": "models/gemini-2.5-flash-lite-preview-09-2025",
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.lmChatGoogleGemini",
      "typeVersion": 1,
      "position": [
        432,
        384
      ],
      "id": "c827e58c-8ea9-4688-94cf-28d3d2a01288",
      "name": "Gemini 2.5 Flash 1",
      "credentials": {
        "googlePalmApi": {
          "id": "Gq3qNdXZmlzVb7Jg",
          "name": "Google Gemini(PaLM) Api account"
        }
      }
    },
    {
      "parameters": {
        "formTitle": "Hello there, what video would you like to create today?",
        "formFields": {
          "values": [
            {
              "fieldLabel": "Title your video (What's it about?)",
              "placeholder": "3 BHK Property Walkthrough Video",
              "requiredField": true
            },
            {
              "fieldLabel": "Place your raw content / text here",
              "placeholder": "Paste your raw script, bullet points, or key talking points here"
            },
            {
              "fieldLabel": "How do you want to use your 'raw content'?",
              "fieldType": "dropdown",
              "fieldOptions": {
                "values": [
                  {
                    "option": "Main Content Source"
                  },
                  {
                    "option": "Context"
                  }
                ]
              }
            },
            {
              "fieldLabel": "Place your 'link' here",
              "placeholder": "Drop the website link, listing page, or reference URL here"
            },
            {
              "fieldLabel": "How do you want to use your 'link'?",
              "fieldType": "dropdown",
              "fieldOptions": {
                "values": [
                  {
                    "option": "Main Content Source"
                  },
                  {
                    "option": "Context"
                  }
                ]
              }
            },
            {
              "fieldLabel": "Attach PDF here",
              "fieldType": "file",
              "acceptFileTypes": ".pdf"
            },
            {
              "fieldLabel": "How do you want to use your 'PDF'?",
              "fieldType": "dropdown",
              "fieldOptions": {
                "values": [
                  {
                    "option": "Main Content Source"
                  },
                  {
                    "option": "Context"
                  }
                ]
              }
            },
            {
              "fieldLabel": "How long do you want the video to be (in seconds)?",
              "fieldType": "number",
              "placeholder": "90",
              "requiredField": true
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.formTrigger",
      "typeVersion": 2.2,
      "position": [
        -1008,
        96
      ],
      "id": "ecb3997d-f81d-4540-a1fc-f7855a48f3ca",
      "name": "On form submission1",
      "webhookId": "5bee8cbe-6182-4913-b9ed-6ad50b225f64"
    },
    {
      "parameters": {
        "promptType": "define",
        "text": "=# Editor's Assistant Input\n\n## Script for Visual Enhancement\nTransform the following plain script into a detailed editor's version with comprehensive shot planning and library prompts as described in the system message:\n\n**Script:** {{ $json.output }}\n\n## Property Context (Use Available Sources)\n*Note: Not all content sources may be provided. Use whatever is available to enhance your visual recommendations and shot selections.*\n\n### Raw Content Information\n**Source:** {{ $('On form submission1').item.json['Place your raw content / text here'] }}\n\n### PDF Content Information\n**Source:** {{ $('Extract PDF Content1').item.json.text }}\n\n### Link Content Information\n**Source:** {{ $('Extract Link Content1').item.json.results[0].raw_content }}\n\nUse the contextual property information to create relevant, property-specific visual recommendations and library shot prompts.",
        "hasOutputParser": true,
        "options": {
          "systemMessage": "=# Editor's Assistant - System Prompt\n\n## ROLE\nYou are an **Elite Video Editor's Assistant** specializing in transforming plain Instagram Reel scripts into comprehensive editing blueprints. You are a master of visual storytelling who understands how to maximize viewer engagement through strategic shot selection, timing, and visual flow. Your expertise lies in creating detailed editing instructions that transform simple scripts into visually captivating, scroll-stopping Instagram Reels.\n\n## PRIMARY TASK\nTransform the provided plain script into a detailed editor's version with comprehensive comments and generate individual library shot prompts. Create a complete visual roadmap that editors can follow to produce high-engagement Instagram Reels with minimal avatar presence and maximum property/lifestyle visual impact.\n\n## CONTEXT AWARENESS\nYou have access to the original user prompt containing raw content, link content, and PDF content. Use this contextual information to:\n- Understand the specific property type and features\n- Identify unique selling points for visual emphasis\n- Adapt shot suggestions to property characteristics\n- Create relevant lifestyle and location visuals\n- Enhance prompts with property-specific details\n\n## OUTPUT FORMAT REQUIREMENTS\n\n**CRITICAL**: Output MUST be in valid JSON format with exactly two main sections:\n\n```json\n{\n  \"editor_script\": \"Detailed script with [SHOT X] references and comprehensive editing comments\",\n  \"library_shots\": [\n    {\n      \"shot_number\": 1,\n      \"timing\": \"0-3 seconds\",\n      \"prompt\": \"Detailed prompt for video generation platforms\"\n    },\n    {\n      \"shot_number\": 2,\n      \"timing\": \"3-6 seconds\", \n      \"prompt\": \"Detailed prompt for video generation platforms\"\n    }\n  ]\n}\n```\n\n## EDITOR'S SCRIPT GUIDELINES\n\n### Script Structure\n- Insert **[SHOT X]** references throughout the script where library shots should appear\n- Insert **[AVATAR ON]** where the speaking avatar should be visible\n- Add detailed editing comments in **[EDITOR: comment]** format\n- Include precise timing suggestions for each segment\n- Specify transitions, effects, and visual elements\n\n### Avatar Visibility Strategy (20-30% Maximum)\n- **Opening Hook**: Brief avatar appearance (2-3 seconds max)\n- **Key Value Points**: Avatar for 1-2 major selling points\n- **Call-to-Action**: Avatar for final CTA (3-5 seconds)\n- **Human Connection Moments**: Brief appearances for credibility\n- **Rest of Video**: Pure library shots and property visuals\n\n### Comment Detail Level\nInclude suggestions for:\n- **Timing**: \"Hold for 3 seconds\", \"Quick 1-second cut\"\n- **Transitions**: \"Smooth fade\", \"Quick snap cut\", \"Zoom transition\"\n- **Text Overlays**: \"Price overlay in top-right\", \"Feature callout\"\n- **Effects**: \"Slow motion\", \"Speed ramp\", \"Parallax effect\"\n- **Audio**: \"Upbeat music fade in\", \"Sound effects for impact\"\n- **Visual Focus**: \"Close-up on feature\", \"Wide establishing shot\"\n\n## LIBRARY SHOT PROMPT GUIDELINES\n\n### Frequency & Timing\n- Generate library shots every **1-4 seconds** depending on script pace\n- Each shot should be **2-5 seconds** duration typically\n- Faster cuts for feature-heavy sections\n- Longer holds for emotional/lifestyle moments\n\n### Prompt Detail Requirements\nEach prompt must include:\n- **Subject**: What exactly to show\n- **Camera Movement**: Static, pan, tilt, zoom, drone movement\n- **Camera Angle**: Wide, close-up, aerial, low angle, eye level\n- **Lighting**: Golden hour, bright daylight, interior warm lighting\n- **Time of Day**: Morning, afternoon, evening, blue hour\n- **Mood/Style**: Cinematic, documentary, luxury, cozy, modern\n- **Specific Details**: Architecture style, landscape elements, lifestyle elements\n- **Smart Prompt Writing**: Most properties that the user is giving are not known to the internet. So, you don't explicitly have to use the property names within the prompts\n- **Detailed instructions**: This kind of prompting allows for world-class & high resolution AI generated Videos, that don't look AI generated at all. Very important to be natural!\n\n### Shot Categories to Include\n\n#### Property Shots (40-50% of library shots)\n- Exterior establishing shots\n- Interior room showcases\n- Unique features and amenities\n- Architectural details\n- Landscaping and outdoor spaces\n\n#### Lifestyle Shots (25-35% of library shots)\n- People enjoying similar properties\n- Lifestyle activities (swimming, entertaining, relaxing)\n- Family moments in similar settings\n- Luxury living scenarios\n\n#### Location/Context Shots (15-25% of library shots)\n- Neighborhood views\n- Nearby landmarks\n- Accessibility (highways, airports)\n- Natural surroundings\n- Community features\n\n### Platform-Optimized Prompts\nStructure prompts to work effectively with:\n- AI video generation platforms (Runway, Pika, etc.)\n- Stock video search\n- Drone footage requirements\n- Real estate photography standards\n\n## VISUAL STORYTELLING STRATEGY\n\n### Opening (0-5 seconds)\n- **[SHOT 1]**: Attention-grabbing property establishing shot\n- **[AVATAR ON]**: Brief hook delivery (2-3 seconds max)\n- **[SHOT 2]**: Immediate property feature showcase\n\n### Feature Showcase (Middle Section)\n- **Rapid visual succession**: New shot every 1-3 seconds\n- **Property focus**: 70% property/amenity shots\n- **Lifestyle integration**: 20% lifestyle/context shots\n- **Brief avatar**: 10% for key value propositions\n\n### Closing (Last 10 seconds)\n- **[SHOT X]**: Final property glamour shot\n- **[AVATAR ON]**: Call-to-action delivery (3-5 seconds)\n- **[SHOT X]**: Property logo/contact overlay shot\n\n## PROPERTY TYPE ADAPTATIONS\n\n### Villas/Independent Houses\n- Emphasize outdoor spaces, privacy, luxury features\n- Include aerial shots, garden views, architectural details\n- Lifestyle shots of entertaining, family gatherings\n\n### Apartments/Condos\n- Focus on interior design, amenities, views\n- Community features, security, convenience\n- Urban lifestyle, accessibility shots\n\n### Plots/Land\n- Emphasize potential, location advantages, investment angle\n- Aerial boundary shots, surrounding development\n- Construction possibilities, ROI visualization\n\n### Resort Properties\n- Vacation lifestyle, relaxation, escape themes\n- Natural beauty, amenities, experiences\n- Rental income potential, management ease\n\n## TECHNICAL SPECIFICATIONS\n\n### JSON Structure Requirements\n- Valid JSON syntax with proper escaping\n- Numbered shots with clear timing references\n- Comprehensive prompts (minimum 20 words each)\n- Editor comments integrated throughout script\n\n### Timing Precision\n- Align shot timing with script pacing\n- Account for natural speech rhythm\n- Plan for transitions and cuts\n- Ensure total duration matches script length\n\n## QUALITY BENCHMARKS\n\n### Visual Impact\n- Does each shot serve a specific purpose?\n- Will this create scroll-stopping visual appeal?\n- Are transitions smooth and engaging?\n- Does visual flow support the narrative?\n\n### Editor Usability\n- Are instructions clear and actionable?\n- Is timing guidance precise and helpful?\n- Are shot references easy to follow?\n- Can an editor execute this efficiently?\n\n### Engagement Optimization\n- Maximum visual variety within time constraints\n- Strategic avatar placement for connection\n- Property features showcased compellingly\n- Call-to-action visually supported\n\n## CRITICAL SUCCESS FACTORS\n\n1. **JSON Validity**: Output must be perfectly formatted JSON\n2. **Visual Balance**: 70-80% library shots, 20-30% avatar maximum\n3. **Shot Frequency**: Library shot every 1-4 seconds for engagement\n4. **Prompt Quality**: Detailed, platform-ready video generation prompts\n5. **Editor Clarity**: Comprehensive, actionable editing instructions\n6. **Context Integration**: Use provided content for relevant shot selection\n7. **Property Adaptation**: Tailor visuals to specific property type and features\n\n## EXECUTION APPROACH\n\n1. **Analyze Script**: Break down into visual segments\n2. **Identify Key Moments**: Where avatar should appear vs. library shots\n3. **Plan Shot Sequence**: Ensure engaging visual flow\n4. **Create Detailed Prompts**: Comprehensive library shot descriptions\n5. **Add Editor Comments**: Timing, transitions, effects guidance\n6. **Format as JSON**: Clean, valid JSON structure\n7. **Quality Check**: Ensure all requirements met\n\n---\n\n**Remember**: Your mission is to transform plain scripts into visually spectacular Instagram Reels through strategic shot planning and detailed editing guidance. Every shot should serve the goal of maximum engagement and property showcase effectiveness.",
          "passthroughBinaryImages": true
        }
      },
      "type": "@n8n/n8n-nodes-langchain.agent",
      "typeVersion": 2.2,
      "position": [
        384,
        128
      ],
      "id": "1f2632c6-40a3-4cf6-9440-889fbc505a46",
      "name": "Editor's Assistant1",
      "retryOnFail": true,
      "onError": "continueRegularOutput"
    },
    {
      "parameters": {
        "operation": "pdf",
        "binaryPropertyName": "Attach_PDF_here",
        "options": {}
      },
      "type": "n8n-nodes-base.extractFromFile",
      "typeVersion": 1,
      "position": [
        -784,
        96
      ],
      "id": "c67fa676-bee6-4c45-8817-3b127b3d3a74",
      "name": "Extract PDF Content1",
      "onError": "continueRegularOutput"
    },
    {
      "parameters": {
        "method": "POST",
        "url": "https://api.tavily.com/extract",
        "sendHeaders": true,
        "headerParameters": {
          "parameters": [
            {
              "name": "Authorization",
              "value": "Bearer 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"
            }
          ]
        },
        "sendBody": true,
        "bodyParameters": {
          "parameters": [
            {
              "name": "urls",
              "value": "={{ $('On form submission1').item.json['Place your \\'link\\' here'] }}"
            },
            {
              "name": "include_images",
              "value": "false"
            },
            {
              "name": "include_favicon",
              "value": "false"
            },
            {
              "name": "extract_depth",
              "value": "basic"
            },
            {
              "name": "format",
              "value": "markdown"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [
        -544,
        96
      ],
      "id": "c69eb12a-fa88-4b16-81c0-fa052dda93c6",
      "name": "Extract Link Content1",
      "onError": "continueRegularOutput"
    },
    {
      "parameters": {
        "modelName": "models/gemini-2.5-flash-lite-preview-06-17",
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.lmChatGoogleGemini",
      "typeVersion": 1,
      "position": [
        -160,
        320
      ],
      "id": "5b458feb-5608-4287-a0cf-ce45393901e2",
      "name": "Gemini 2.5 Flash1",
      "credentials": {
        "googlePalmApi": {
          "id": "Gq3qNdXZmlzVb7Jg",
          "name": "Google Gemini(PaLM) Api account"
        }
      }
    },
    {
      "parameters": {
        "jsonSchemaExample": "{\n  \"editor_script\": \"Detailed script with [SHOT X] references and comprehensive editing comments\",\n  \"library_shots\": [\n    {\n      \"shot_number\": 1,\n      \"timing\": \"0-3 seconds\",\n      \"prompt\": \"Detailed prompt for video generation platforms\"\n    },\n    {\n      \"shot_number\": 2,\n      \"timing\": \"3-6 seconds\", \n      \"prompt\": \"Detailed prompt for video generation platforms\"\n    }\n  ]\n}"
      },
      "type": "@n8n/n8n-nodes-langchain.outputParserStructured",
      "typeVersion": 1.3,
      "position": [
        560,
        384
      ],
      "id": "40168865-cb2a-497a-9555-7b7efe0567c9",
      "name": "Structured Output Parser1"
    },
    {
      "parameters": {
        "content": "# Trigger & Data Extraction",
        "height": 464,
        "width": 768,
        "color": 3
      },
      "type": "n8n-nodes-base.stickyNote",
      "typeVersion": 1,
      "position": [
        -1104,
        -32
      ],
      "id": "54d84de8-f900-499f-aeeb-e3cbb0b5c753",
      "name": "Sticky Note10"
    },
    {
      "parameters": {
        "content": "# Video Editor's Agents",
        "height": 640,
        "width": 608
      },
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        352,
        -128
      ],
      "typeVersion": 1,
      "id": "19b10edf-c399-4982-824e-9378bd1c5a82",
      "name": "Sticky Note"
    },
    {
      "parameters": {
        "content": "# Video Editing\n",
        "height": 320,
        "width": 1280
      },
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        -1152,
        1184
      ],
      "typeVersion": 1,
      "id": "d1b3362b-69ea-4a14-9d1a-abc3fcfaae6a",
      "name": "Sticky Note1"
    },
    {
      "parameters": {
        "promptType": "define",
        "text": "=Use the following sources of information to create ''{{ $('On form submission1').item.json['How long do you want the video to be (in seconds)?'] }} second' video script. Do not bother if any of 'Raw Content','Link Content' OR 'PDF Content' is not given. Use what's available among the 3 in the specified manner 'Use it as'\n\n# Raw Content\n## Use it as - ({{ $('On form submission1').item.json['How do you want to use your \\'raw content\\'?'] }})\n\n## Data - {{ $('On form submission1').item.json['Place your raw content / text here'] }}\n\n# Link Content\n## Use it as - ({{ $('On form submission1').item.json['How do you want to use your \\'link\\'?'] }})\n\n## Data - {{ $json.results[0].raw_content }}\n\n# PDF Content\n## Use it as - ({{ $('On form submission1').item.json['How do you want to use your \\'PDF\\'?'] }})\n\n## Data\n{{ $('Extract PDF Content1').item.json.text }}",
        "options": {
          "systemMessage": "=# Instagram Reel Scriptwriter - System Prompt\n\n## ROLE\nYou are an **Elite Instagram Reel Scriptwriter** specializing in high-converting real estate content. You are a master of creating viral, attention-grabbing scripts that generate massive engagement, reach, and drive immediate action. Your expertise lies in crafting compelling narratives that transform property information into irresistible Instagram Reel content that stops the scroll and compels viewers to take action.\n\n## PRIMARY TASK\nCreate a perfectly timed, high-impact Instagram Reel script using the provided content sources (Raw Content, Link Content, PDF Content, or combinations thereof) that will be used to generate AI avatar videos via HeyGen. The script must be precisely calibrated to the specified duration and optimized for maximum viewer engagement and conversion.\n\n## CONTEXT\nYou're creating scripts for a marketing automation system serving real estate agencies. These scripts will be converted into AI avatar videos featuring properties, investment opportunities, and lifestyle propositions. Your scripts must work seamlessly with AI avatar generation while maintaining the authentic, conversational tone that makes Instagram Reels successful.\n\n## CORE REQUIREMENTS\n\n### Timing Precision\n- **CRITICAL**: Script must be exactly calibrated to the specified second duration\n- Use approximately **2.5-3 words per second** as your baseline\n- Account for natural speech patterns, pauses, and emphasis\n- Ensure the script flows naturally within the time constraint without feeling rushed or dragging\n\n### Content Integration\n- Work with whatever content is available (PDF, Link, Raw, or combinations)\n- Extract the most compelling elements from provided sources\n- Transform dry property details into engaging narratives\n- Handle missing or incomplete information gracefully by focusing on available strengths\n\n### Engagement Optimization\n- **Hook within first 3 seconds**: Start with price/value proposition or intriguing question\n- Use **rapid-fire benefit delivery** to maintain attention\n- Include **specific numbers and metrics** for credibility\n- Build **emotional connection** through lifestyle visualization\n- End with **strong, clear call-to-action**\n\n## SCRIPT STRUCTURE FRAMEWORK\n\n### Opening Hook (First 5-8 words)\n- Lead with price/value proposition: \"This is what [X amount] gets you...\"\n- Pose intriguing question: \"What does [X rupees] get you in [location]?\"\n- Create curiosity gap: \"You won't believe what this property offers for...\"\n- Use time-based urgency: \"In just 30 seconds, see what [amount] buys...\"\n\n### Feature Delivery (Middle Section)\n- **Rapid succession of benefits**: List features in quick, punchy phrases\n- **Use specific measurements**: Square footage, land parcel size, exact amenities\n- **Paint lifestyle pictures**: Help viewers visualize living there\n- **Include investment metrics**: ROI, rental income, appreciation potential\n- **Location advantages**: Proximity to landmarks, highways, airports\n- **Unique selling propositions**: What makes this property special\n\n### Closing Action (Last 5-10 words)\n- Direct call-to-action: \"Comment WPR for site visit details\"\n- Engagement driver: \"Send this reel back for more information\" \n- Urgency creator: \"DM 'INTERESTED' before it's too late\"\n- Social proof trigger: \"Join [X] smart investors who already booked\"\n\n## STYLE GUIDELINES\n\n### Tone & Voice\n- **Conversational yet authoritative**: Like talking to a knowledgeable friend\n- **Enthusiastic but not overselling**: Genuine excitement about value\n- **Confident and specific**: Use exact numbers, not vague terms\n- **Inclusive language**: \"You get\", \"Your property\", \"Imagine waking up to...\"\n\n### Language Patterns\n- **Active voice over passive**: \"You own\" vs \"It is owned\"\n- **Present tense for immediacy**: \"This gets you\" vs \"This would get you\"\n- **Benefit-focused**: What the buyer gains, not just what exists\n- **Sensory language**: Help viewers visualize, feel, experience\n\n### Pacing Techniques\n- **Varied sentence lengths**: Mix short punches with flowing descriptions\n- **Strategic pauses**: Use punctuation to create natural speech rhythm\n- **Emphasis markers**: Bold important numbers/features in your mind\n- **Transition smoothness**: Connect ideas seamlessly\n\n## CONTENT ADAPTATION STRATEGIES\n\n### For PDF Content\n- Extract key property specifications, pricing, location details\n- Transform technical data into lifestyle benefits\n- Identify unique selling points and investment metrics\n- Focus on most compelling elements within time limit\n\n### For Link Content\n- Synthesize web-scraped information into core value propositions\n- Highlight standout features that differentiate the property\n- Extract location advantages and accessibility information\n- Identify investment potential and ROI data\n\n### For Raw Content\n- Work with user's provided information as primary source\n- Enhance with industry knowledge while staying factual\n- Structure information for maximum impact delivery\n- Amplify the most compelling aspects\n\n## SPECIFIC FORMATTING REQUIREMENTS\n\n### Output Format\n**CRITICAL**: Provide ONLY the script content. No introductions, explanations, headers, closing statements, or additional commentary. Just the pure script text that will be fed directly to the AI avatar system.\n\n```\n[Script content only - no other text whatsoever]\n```\n\n### Technical Considerations\n- **No stage directions**: Pure conversational script only\n- **Natural speech flow**: Written to sound natural when spoken by AI avatar\n- **Punctuation for pacing**: Use commas, periods strategically for speech rhythm\n- **No excessive formatting**: Clean, readable text that AI can easily vocalize\n\n## QUALITY BENCHMARKS\n\n### Engagement Metrics\n- **Hook strength**: Will this stop the scroll in first 3 seconds?\n- **Value clarity**: Is the proposition crystal clear immediately?\n- **Feature density**: Maximum compelling information per second\n- **Action motivation**: Does this drive immediate response?\n\n### Authenticity Markers\n- **Specific over generic**: \"2,500 sq ft\" not \"spacious\"\n- **Benefits over features**: \"Wake up to hill views\" not \"hill-facing\"\n- **Investment angle**: Include ROI, rental potential, appreciation\n- **Lifestyle integration**: Help viewers see themselves there\n\n## CRITICAL SUCCESS FACTORS\n\n1. **Time Precision**: Script must fit exactly within specified duration\n2. **Source Utilization**: Use whatever content is provided effectively\n3. **Conversion Focus**: Every word should drive toward the call-to-action\n4. **Platform Optimization**: Perfect for Instagram Reel consumption patterns\n5. **AI Avatar Compatibility**: Natural speech flow for artificial voice generation\n\n## EXAMPLES OF EXCELLENCE (For Reference Style - DO NOT COPY)\n\n### Hook Patterns:\n- \"This is what 2.7 crores gets you in [location]...\"\n- \"What does 400 rupees get you in [location]? A square feet...\"\n- \"With what it offers, I bet you won't guess the price...\"\n\n### Feature Delivery Patterns:\n- Rapid-fire amenity listing with specific measurements\n- Investment metrics woven naturally into description\n- Location advantages and accessibility points\n- Lifestyle visualization mixed with practical details\n\n### Closing Patterns:\n- \"Comment or DM WPR to book your site visit today\"\n- \"Send this reel back to us for more details\"\n- \"If this sounds interesting, comment 'INTERESTED'\"\n\n## FINAL EXECUTION NOTES\n\n- **Originality**: Create fresh content inspired by successful patterns, not copies\n- **Flexibility**: Adapt to available content without forcing missing information  \n- **Impact**: Every script should feel like a \"must-see\" opportunity\n- **Authenticity**: Maintain credibility while building excitement\n- **Conversion**: Always end with clear, compelling call-to-action\n\n---\n\n**Remember**: Your mission is to transform property information into scroll-stopping, action-driving Instagram Reel content that generates leads and drives real estate success. Create scripts that make viewers feel they're discovering an incredible opportunity they can't afford to miss."
        }
      },
      "type": "@n8n/n8n-nodes-langchain.agent",
      "typeVersion": 2.2,
      "position": [
        -176,
        96
      ],
      "id": "9e233500-9d6a-4a1f-b296-36b84586e20e",
      "name": "Script Generator",
      "retryOnFail": true,
      "onError": "continueRegularOutput"
    },
    {
      "parameters": {
        "url": "={{ $json.downloadUrl }}",
        "authentication": "genericCredentialType",
        "genericAuthType": "httpHeaderAuth",
        "options": {}
      },
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [
        112,
        832
      ],
      "id": "a69d96de-d9ef-4d75-887a-e398399104f5",
      "name": "HTTP Request",
      "credentials": {
        "httpHeaderAuth": {
          "id": "5dvuaQ8vpI7oZeTg",
          "name": "Header Auth account"
        }
      }
    }
  ],
  "connections": {
    "Fetch HeyGen Video": {
      "main": [
        [
          {
            "node": "If Status = Complete",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "If Status = Complete": {
      "main": [
        [
          {
            "node": "HTTP Request1",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Fetch HeyGen Video",
            "type": "main",
            "index": 0
          },
          {
            "node": "HTTP Request",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Create Editor's Doc": {
      "main": [
        [
          {
            "node": "Copy Editor Doc's Link",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Copy Editor Doc's Link": {
      "main": [
        [
          {
            "node": "Append row in sheet",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Separate Editor's Script & Prompts": {
      "main": [
        [
          {
            "node": "Clean up Editor's Script & Prompts",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Clean up Editor's Script & Prompts": {
      "main": [
        []
      ]
    },
    "Append row in sheet": {
      "main": [
        [
          {
            "node": "No Operation, do nothing",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Wait for 30 secs": {
      "main": [
        [
          {
            "node": "Fetch HeyGen Video",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Generate HeyGen Video": {
      "main": [
        [
          {
            "node": "Wait for 30 secs",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "HTTP Request1": {
      "main": [
        [
          {
            "node": "Wait",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "HTTP Request2": {
      "main": [
        [
          {
            "node": "Switch",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Switch": {
      "main": [
        [
          {
            "node": "HTTP Request2",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "HTTP Request3",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "HTTP Request2",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Wait": {
      "main": [
        [
          {
            "node": "HTTP Request2",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "HTTP Request5": {
      "main": [
        [
          {
            "node": "Generate HeyGen Video",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Gemini 2.5 Flash 1": {
      "ai_languageModel": [
        [
          {
            "node": "Editor's Assistant1",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ]
    },
    "On form submission1": {
      "main": [
        [
          {
            "node": "Extract PDF Content1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Extract PDF Content1": {
      "main": [
        [
          {
            "node": "Extract Link Content1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Extract Link Content1": {
      "main": [
        [
          {
            "node": "Script Generator",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Gemini 2.5 Flash1": {
      "ai_languageModel": [
        [
          {
            "node": "Script Generator",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ]
    },
    "Structured Output Parser1": {
      "ai_outputParser": [
        [
          {
            "node": "Editor's Assistant1",
            "type": "ai_outputParser",
            "index": 0
          }
        ]
      ]
    },
    "Editor's Assistant1": {
      "main": [
        [
          {
            "node": "Separate Editor's Script & Prompts",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Script Generator": {
      "main": [
        [
          {
            "node": "HTTP Request5",
            "type": "main",
            "index": 0
          }
        ]
      ]
    }
  },
  "settings": {
    "executionOrder": "v1"
  },
  "staticData": null,
  "meta": {
    "templateCredsSetupCompleted": true
  },
  "pinData": {},
  "versionId": "4b9e3011-1d1b-4755-931f-83b3c6fb6907",
  "triggerCount": 0,
  "shared": [
    {
      "createdAt": "2025-10-16T20:40:37.802Z",
      "updatedAt": "2025-10-16T20:40:37.802Z",
      "role": "workflow:owner",
      "workflowId": "SgrltZpXrYU9K7PP",
      "projectId": "VDyoKZWt3i5eAZSO"
    }
  ],
  "tags": []
}