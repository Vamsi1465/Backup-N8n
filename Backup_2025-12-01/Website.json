{
  "createdAt": "2025-11-16T07:33:05.832Z",
  "updatedAt": "2025-11-16T09:57:00.000Z",
  "id": "C8Mvab5ljKseAAcA",
  "name": "Website",
  "active": false,
  "isArchived": false,
  "nodes": [
    {
      "parameters": {
        "formTitle": "Trusted by coaches and agencies",
        "formDescription": "Free audit done by automation experts",
        "formFields": {
          "values": [
            {
              "fieldLabel": "Name",
              "placeholder": "Enter your name",
              "requiredField": true
            },
            {
              "fieldLabel": "Email",
              "placeholder": "Enter your email",
              "requiredField": true
            },
            {
              "fieldLabel": "Whatsapp number",
              "fieldType": "number",
              "placeholder": "Number",
              "requiredField": true
            },
            {
              "fieldLabel": "Business type",
              "requiredField": true
            },
            {
              "fieldLabel": "Monthly revenue range",
              "fieldType": "dropdown",
              "fieldOptions": {
                "values": [
                  {
                    "option": "2k"
                  },
                  {
                    "option": "3k"
                  }
                ]
              },
              "requiredField": true
            },
            {
              "fieldLabel": "What's your biggest challenge right now?",
              "placeholder": "Message",
              "requiredField": true
            },
            {
              "fieldLabel": "How soon do you want to solve this",
              "fieldType": "dropdown",
              "fieldOptions": {
                "values": [
                  {
                    "option": "Immediate"
                  },
                  {
                    "option": "Week later"
                  },
                  {
                    "option": "month later"
                  },
                  {
                    "option": "Not urgent"
                  }
                ]
              },
              "requiredField": true
            },
            {
              "fieldLabel": "What is your biggest goal in the next 90 days",
              "requiredField": true
            }
          ]
        },
        "options": {
          "appendAttribution": false,
          "buttonLabel": "Book a Call",
          "ignoreBots": true,
          "customCss": "<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n<meta charset=\"UTF-8\" />\n<meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\" />\n<title>Lumoscale Lead Form</title>\n<style>\n:root {\n\t--font-family: 'Open Sans', sans-serif;\n\t--font-weight-normal: 400;\n\t--font-weight-bold: 600;\n\t--font-size-body: 14px;\n\t--font-size-label: 14px;\n\t--font-size-header: 20px;\n\t--color-background: #fbfcfe;\n\t--color-card-bg: #ffffff;\n\t--color-card-border: #dbdfe7;\n\t--color-card-shadow: rgba(99, 77, 255, 0.06);\n\t--color-header: #525356;\n\t--color-label: #555555;\n\t--color-input-border: #dbdfe7;\n\t--color-input-text: #333;\n\t--color-focus-border: #5a4cc2;\n\t--color-submit-btn-bg: #ff6d5a;\n\t--color-submit-btn-text: #ffffff;\n\t--color-html-link: #ff6d5a;\n\t--color-error: #ea1f30;\n\t--border-radius-card: 8px;\n\t--border-radius-input: 6px;\n\t--box-shadow-card: 0 6px 18px var(--color-card-shadow);\n}\n\nbody {\n\tfont-family: var(--font-family);\n\tbackground: var(--color-background);\n\tdisplay: flex;\n\tjustify-content: center;\n\talign-items: center;\n\tmin-height: 100vh;\n\tpadding: 20px;\n}\n\n.form-card {\n\tbackground: var(--color-card-bg);\n\tborder: 1px solid var(--color-card-border);\n\tbox-shadow: var(--box-shadow-card);\n\tborder-radius: var(--border-radius-card);\n\twidth: 100%;\n\tmax-width: 420px;\n\tpadding: 32px;\n}\n\n.form-header {\n\ttext-align: center;\n\tcolor: var(--color-header);\n\tfont-size: var(--font-size-header);\n\tfont-weight: var(--font-weight-bold);\n\tmargin-bottom: 12px;\n}\n\n.form-subtext {\n\ttext-align: center;\n\tcolor: #7e8186;\n\tfont-size: 13px;\n\tmargin-bottom: 24px;\n}\n\n.form-group {\n\tmargin-bottom: 16px;\n}\n\nlabel {\n\tdisplay: block;\n\tmargin-bottom: 6px;\n\tcolor: var(--color-label);\n\tfont-size: var(--font-size-label);\n}\n\ninput, textarea, select {\n\twidth: 100%;\n\tpadding: 12px;\n\tborder: 1px solid var(--color-input-border);\n\tborder-radius: var(--border-radius-input);\n\tfont-size: var(--font-size-body);\n\tcolor: var(--color-input-text);\n\tbackground-color: #fff;\n\ttransition: border 0.3s;\n}\n\ninput:focus, textarea:focus, select:focus {\n\toutline: none;\n\tborder-color: var(--color-focus-border);\n\tbox-shadow: 0 0 0 3px rgba(90, 76, 194, 0.1);\n}\n\nbutton {\n\twidth: 100%;\n\tbackground: var(--color-submit-btn-bg);\n\tcolor: var(--color-submit-btn-text);\n\tpadding: 14px;\n\tfont-size: var(--font-size-label);\n\tfont-weight: var(--font-weight-bold);\n\tborder: none;\n\tborder-radius: var(--border-radius-input);\n\tcursor: pointer;\n\ttransition: 0.3s;\n}\n\nbutton:hover {\n\tbackground: #ff543e;\n}\n\nfooter {\n\ttext-align: center;\n\tmargin-top: 16px;\n\tfont-size: 12px;\n\tcolor: #888;\n}\n</style>\n</head>\n<body>\n\n<div class=\"form-card\">\n\t<h2 class=\"form-header\">Get Your Free Automation Audit</h2>\n\t<p class=\"form-subtext\">See how we can automate your lead generation, qualification, and onboarding.</p>\n\t\n\t<form>\n\t\t<div class=\"form-group\">\n\t\t\t<label for=\"name\">Full Name</label>\n\t\t\t<input type=\"text\" id=\"name\" placeholder=\"Enter your name\" required>\n\t\t</div>\n\n\t\t<div class=\"form-group\">\n\t\t\t<label for=\"email\">Email</label>\n\t\t\t<input type=\"email\" id=\"email\" placeholder=\"Enter your email\" required>\n\t\t</div>\n\n\t\t<div class=\"form-group\">\n\t\t\t<label for=\"business\">Business Type / Niche</label>\n\t\t\t<select id=\"business\">\n\t\t\t\t<option value=\"\">Select...</option>\n\t\t\t\t<option>Coach / Consultant</option>\n\t\t\t\t<option>Agency Owner</option>\n\t\t\t\t<option>Real Estate</option>\n\t\t\t\t<option>Law / Legal</option>\n\t\t\t\t<option>Other</option>\n\t\t\t</select>\n\t\t</div>\n\n\t\t<div class=\"form-group\">\n\t\t\t<label for=\"pain\">Biggest Challenge Right Now</label>\n\t\t\t<textarea id=\"pain\" rows=\"3\" placeholder=\"E.g., Too many unqualified leads or missed follow-ups\"></textarea>\n\t\t</div>\n\n\t\t<button type=\"submit\">Submit</button>\n\t</form>\n\n\t<footer>Powered by Lumoscale Automations</footer>\n</div>\n\n</body>\n</html>\n"
        }
      },
      "type": "n8n-nodes-base.formTrigger",
      "typeVersion": 2.3,
      "position": [
        -384,
        32
      ],
      "id": "588ede33-fa15-4fe9-854d-0ffcb510b391",
      "name": "Website Signup or Webinar Signup",
      "webhookId": "4be5de2b-37e1-4104-949c-1f34b061df64"
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict",
            "version": 2
          },
          "conditions": [
            {
              "id": "323ad272-08e7-462f-9774-efe6946dfba0",
              "leftValue": "={{ $json.Email }}",
              "rightValue": "",
              "operator": {
                "type": "string",
                "operation": "notExists",
                "singleValue": true
              }
            }
          ],
          "combinator": "and"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.if",
      "typeVersion": 2.2,
      "position": [
        1088,
        32
      ],
      "id": "c44a43a2-8fbd-4ed7-b07a-edb356c19121",
      "name": "If duplicates Found vs Not Found"
    },
    {
      "parameters": {
        "documentId": {
          "__rl": true,
          "value": "1IUNIvKOc2s6qmjwrMZLpuhgvvK_py2sXskapsOswS04",
          "mode": "list",
          "cachedResultName": "Coaches",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1IUNIvKOc2s6qmjwrMZLpuhgvvK_py2sXskapsOswS04/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": "gid=0",
          "mode": "list",
          "cachedResultName": "Form",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1IUNIvKOc2s6qmjwrMZLpuhgvvK_py2sXskapsOswS04/edit#gid=0"
        },
        "filtersUI": {
          "values": [
            {
              "lookupColumn": "Email",
              "lookupValue": "={{ $json.email }}"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        864,
        32
      ],
      "id": "6151a6c7-8235-435b-810e-1c5d3a7906c1",
      "name": "Check duplicates",
      "alwaysOutputData": true,
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "3MsYFPOz6gYs3lBk",
          "name": "Google Sheets account"
        }
      }
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "8b3ce1dd-7bf9-4a69-ac98-e11ab5b5050a",
              "name": "Name",
              "value": "={{ $json.Name }}",
              "type": "string"
            },
            {
              "id": "167f58be-18af-4382-94b6-b7b8d73ad2a2",
              "name": "Email",
              "value": "={{ $json.Email }}",
              "type": "string"
            },
            {
              "id": "8da05d43-4e19-4bb7-bc4a-3650033986ba",
              "name": "Whatsapp number",
              "value": "={{ $json['Whatsapp number'] }}",
              "type": "number"
            },
            {
              "id": "e9afaa00-8635-4999-87c7-3846579abee2",
              "name": "Business type",
              "value": "={{ $json['Business type'] }}",
              "type": "string"
            },
            {
              "id": "18952807-fab2-4977-af47-3621f832c6af",
              "name": "Monthly revenue range",
              "value": "={{ $json['Monthly revenue range'] }}",
              "type": "string"
            },
            {
              "id": "08bd423a-9935-4938-9751-9d945f56d8f6",
              "name": "What's your biggest challenge right now?",
              "value": "={{ $json['What\\'s your biggest challenge right now?'] }}",
              "type": "string"
            },
            {
              "id": "d05a24f1-bd9d-4aa8-8e6f-c7cba26cd843",
              "name": "How soon do you want to solve this",
              "value": "={{ $json['How soon do you want to solve this'] }}",
              "type": "string"
            },
            {
              "id": "654eec57-8fcd-4da2-9cc0-6d0dbf3e8e74",
              "name": "What is your biggest goal in the next 90 days",
              "value": "={{ $json['What is your biggest goal in the next 90 days'] }}",
              "type": "string"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        -160,
        32
      ],
      "id": "bdeb801f-2e48-44f6-97b3-1aad8b894e5f",
      "name": "Edit Req Fields for Form"
    },
    {
      "parameters": {
        "jsCode": "for (const item of $input.all()) {\n  const message = item.json.message?.content || item.json.message || \"\";\n\n  // Helper function to extract values after \"Key: \"\n  const extract = (key) => {\n    const regex = new RegExp(`${key}:\\\\s*(.*)`, \"i\");\n    const match = message.match(regex);\n    return match ? match[1].trim() : \"\";\n  };\n\n  item.json.name = extract(\"Name\");\n  item.json.email = extract(\"Email\");\n  item.json.problem_summary = extract(\"Problem Summary\");\n  item.json.need_type = extract(\"Need Type\");\n  item.json.pain_intensity = extract(\"Pain Intensity\");\n  item.json.sentiment = extract(\"Sentiment\");\n  item.json.committed_words = extract(\"CommittedWordsCount\");\n  item.json.urgency_flag = extract(\"UrgencyFlag\");\n  item.json.victim_language = extract(\"VictimLanguage\");\n  item.json.action_words = extract(\"ActionWordsCount\");\n  item.json.readiness_level = extract(\"Readiness Level\");\n  item.json.intent_score = extract(\"IntentScore\");\n  item.json.fit_score = extract(\"FitScore\");\n  item.json.micro_stage = extract(\"Micro Stage\");\n  item.json.coach_notes = extract(\"Coach Notes\");\n  item.json.confidence = extract(\"Confidence\");\n}\n\nreturn $input.all();\n"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        416,
        32
      ],
      "id": "a4416979-bded-4f7e-86fe-5288b2cfaee8",
      "name": "Code in JavaScript"
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "6bffa813-1a70-4e1d-9121-763b94cf50e7",
              "name": "name",
              "value": "={{ $json.name }}",
              "type": "string"
            },
            {
              "id": "2363d5c6-9a30-4511-83cd-4b41a4c4556c",
              "name": "email",
              "value": "={{ $json.email }}",
              "type": "string"
            },
            {
              "id": "de868082-45d1-4a53-912c-050941183009",
              "name": "problem_summary",
              "value": "={{ $json.problem_summary }}",
              "type": "string"
            },
            {
              "id": "2a8c5727-5023-46c0-bd58-552e503bbdc3",
              "name": "need_type",
              "value": "={{ $json.need_type }}",
              "type": "string"
            },
            {
              "id": "40d91714-9db5-4983-a848-cce2c2ef0d03",
              "name": "pain_intensity",
              "value": "={{ $json.pain_intensity }}",
              "type": "string"
            },
            {
              "id": "71886a9b-9fbd-4699-9ab0-6d8c88f3d4d7",
              "name": "sentiment",
              "value": "={{ $json.sentiment }}",
              "type": "string"
            },
            {
              "id": "5cc6db67-7347-40d2-80ea-96c8b52fe653",
              "name": "urgency_flag",
              "value": "={{ $json.urgency_flag }}",
              "type": "string"
            },
            {
              "id": "a8635c53-640f-4de3-94da-f911993e849d",
              "name": "intent_score",
              "value": "={{ $json.intent_score }}",
              "type": "string"
            },
            {
              "id": "7afae70e-4762-492a-bedb-11e1d50c62a0",
              "name": "coach_notes",
              "value": "={{ $json.coach_notes }}",
              "type": "string"
            },
            {
              "id": "b3c5f936-dfc7-4840-ac2e-0c41c7ff16ed",
              "name": "confidence",
              "value": "={{ $json.confidence }}",
              "type": "string"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        640,
        32
      ],
      "id": "ba6a1cc2-df6d-441a-a9ac-a1a0e3fab66e",
      "name": "Edit Fields"
    },
    {
      "parameters": {
        "modelId": {
          "__rl": true,
          "value": "gpt-4.1-mini-2025-04-14",
          "mode": "list",
          "cachedResultName": "GPT-4.1-MINI-2025-04-14"
        },
        "messages": {
          "values": [
            {
              "content": "=You are a Lead Qualification AI Assistant for a coaching business.\nYou will evaluate a lead and decide if they are Hot, Warm, Cold, or Unqualified.\nYou think like an experienced coach and understand emotions, mindset, urgency, ownership, and readiness.\n\nHere is the data you will receive:\n\nName: {{ $('Code in JavaScript').item.json.name }}\nEmail: {{ $('Code in JavaScript').item.json.email }}\nProblem Summary: {{ $('Code in JavaScript').item.json.problem_summary }}\nNeed Type: {{ $('Code in JavaScript').item.json.need_type }}\nPain Intensity: {{ $('Code in JavaScript').item.json.pain_intensity }}\nSentiment: {{ $('Code in JavaScript').item.json.sentiment }}\nCommittedWordsCount: {{ $('Code in JavaScript').item.json.committed_words }}\nUrgencyFlag: {{ $('Code in JavaScript').item.json.urgency_flag }}\nVictimLanguage: {{ $('Code in JavaScript').item.json.victim_language }}\nActionWordsCount: {{ $('Code in JavaScript').item.json.action_words }}\nReadiness Level:{{ $('Code in JavaScript').item.json.readiness_level }}\nIntentScore:{{ $('Code in JavaScript').item.json.intent_score }}\nFitScore: {{ $('Code in JavaScript').item.json.fit_score }}\nMicro Stage: {{ $('Code in JavaScript').item.json.micro_stage }}\nConfidence: {{ $('Code in JavaScript').item.json.confidence }}\n\nYour job is to classify the lead using these rules:\n\nHot Lead\n\nStrong pain intensity.\nStrong ownership.\nStrong desire to change.\nClear urgency or urgency flag is true.\nReadiness level is Interested or Ready to invest.\nIntentScore is 4 or 5.\nCoachable tone.\nAt least four of these conditions must be true.\n\nWarm Lead\n\nReal problem but not urgent.\nShows some desire but does not express fast action.\nReadiness level is Exploring or Interested.\nIntentScore is 3 or 4.\nOpen but not highly committed.\n\nCold Lead\n\nVague pain or unclear problem.\nLow ownership or victim tone.\nNo urgency.\nIntentScore is 1 or 2.\nLittle or no action words or commitment words.\n\nUnqualified\n\nNot a coaching problem.\nProblem irrelevant or spam.\nFitScore is 1.\nRandom or low quality input.\n\nBased on these rules, classify the lead and explain why.\n\nReturn the result in this exact format:\n\nName: {{ $('Code in JavaScript').item.json.name }}\nEmail: {{ $('Code in JavaScript').item.json.email }}\nLead Stage: [Hot or Warm or Cold or Unqualified]\nReason: [Two or three lines that explain emotional and logical reasons for classification]\nCoach Notes: [One line action step for the coach]\n\nKeep everything clear and short. Do not add extra text."
            }
          ]
        },
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.openAi",
      "typeVersion": 1.8,
      "position": [
        -352,
        816
      ],
      "id": "f2d55415-6590-4ef3-9c83-a82de1fcc984",
      "name": "Message a model1",
      "credentials": {
        "openAiApi": {
          "id": "8cTwctTGeEBOJeUq",
          "name": "OpenAi account"
        }
      }
    },
    {
      "parameters": {
        "jsCode": "for (const item of $input.all()) {\n  const raw = item.json.message?.content || item.json.message || \"\";\n\n  const extract = (key) => {\n    const regex = new RegExp(`${key}:\\\\s*(.*)`, \"i\");\n    const match = raw.match(regex);\n    return match ? match[1].trim() : \"\";\n  };\n\n  item.json.name = extract(\"Name\");\n  item.json.email = extract(\"Email\");\n  item.json.lead_stage = extract(\"Lead Stage\");\n  item.json.reason = extract(\"Reason\");\n  item.json.coach_notes = extract(\"Coach Notes\");\n}\n\nreturn $input.all();\n"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        16,
        816
      ],
      "id": "b5e2b328-a8c1-4640-9457-505a30afbd9e",
      "name": "Code in JavaScript1"
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "82dfc6ac-0af4-44e0-99ad-f556be6f2a87",
              "name": "name",
              "value": "={{ $json.name }}",
              "type": "string"
            },
            {
              "id": "7433e411-0b73-4486-a4c8-ec774a475bdf",
              "name": "email",
              "value": "={{ $json.email }}",
              "type": "string"
            },
            {
              "id": "f6c13b9c-f986-455f-b06f-542588e68756",
              "name": "lead_stage",
              "value": "={{ $json.lead_stage }}",
              "type": "string"
            },
            {
              "id": "2b90c612-331c-43e6-ab4a-68405fbb634a",
              "name": "reason",
              "value": "={{ $json.reason }}",
              "type": "string"
            },
            {
              "id": "5a8f2d38-19a1-45c6-83d4-ef3defa981ce",
              "name": "coach_notes",
              "value": "={{ $json.coach_notes }}",
              "type": "string"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        240,
        816
      ],
      "id": "aadf6234-4c86-4c1d-998d-b50787477c4e",
      "name": "Edit Fields1"
    },
    {
      "parameters": {
        "operation": "update",
        "documentId": {
          "__rl": true,
          "value": "1IUNIvKOc2s6qmjwrMZLpuhgvvK_py2sXskapsOswS04",
          "mode": "list",
          "cachedResultName": "Coaches",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1IUNIvKOc2s6qmjwrMZLpuhgvvK_py2sXskapsOswS04/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": "gid=0",
          "mode": "list",
          "cachedResultName": "Website Forms",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1IUNIvKOc2s6qmjwrMZLpuhgvvK_py2sXskapsOswS04/edit#gid=0"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "Email": "={{ $json.Email }}",
            "Date": "={{ new Date().toLocaleDateString('en-IN', { timeZone: 'Asia/Kolkata' }) }}",
            "Name": "={{ $json.Name }}",
            "Message": "={{ $json.Message }}"
          },
          "matchingColumns": [
            "Email"
          ],
          "schema": [
            {
              "id": "Date",
              "displayName": "Date",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "Name",
              "displayName": "Name",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "Email",
              "displayName": "Email",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "Message",
              "displayName": "Message",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "row_number",
              "displayName": "row_number",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "number",
              "canBeUsedToMatch": true,
              "readOnly": true,
              "removed": true
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        1376,
        -64
      ],
      "id": "a221cbd0-b543-4f6d-963c-cbdec5cc15a0",
      "name": "Update Form Sheet 1",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "3MsYFPOz6gYs3lBk",
          "name": "Google Sheets account"
        }
      }
    },
    {
      "parameters": {
        "operation": "append",
        "documentId": {
          "__rl": true,
          "value": "1IUNIvKOc2s6qmjwrMZLpuhgvvK_py2sXskapsOswS04",
          "mode": "list",
          "cachedResultName": "Coaches",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1IUNIvKOc2s6qmjwrMZLpuhgvvK_py2sXskapsOswS04/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": "gid=0",
          "mode": "list",
          "cachedResultName": "Websiteforms",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1IUNIvKOc2s6qmjwrMZLpuhgvvK_py2sXskapsOswS04/edit#gid=0"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "Name": "={{ $('Switch').item.json.name }}",
            "Email": "={{ $('Switch').item.json.email }}",
            "Need type": "={{ $('Edit Fields').first().json.need_type }}",
            "Lead Stage": "={{ $('Code in JavaScript1').first().json.lead_stage }}",
            "Reason": "={{ $('Code in JavaScript1').first().json.reason }}",
            "Coach notes": "={{ $('Edit Fields1').item.json.coach_notes }}",
            "Date": "={{ $now }}",
            "Problem Summary": "={{ $('Edit Fields').first().json.problem_summary }}",
            "Intent Score": "={{ $('Edit Fields').first().json.intent_score }}",
            "Pain Intensity": "={{ $('Edit Fields').first().json.pain_intensity }}"
          },
          "matchingColumns": [],
          "schema": [
            {
              "id": "Date",
              "displayName": "Date",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "Name",
              "displayName": "Name",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "Email",
              "displayName": "Email",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "Problem Summary",
              "displayName": "Problem Summary",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "Need type",
              "displayName": "Need type",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "Intent Score",
              "displayName": "Intent Score",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "Lead Stage",
              "displayName": "Lead Stage",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "Reason",
              "displayName": "Reason",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "Pain Intensity",
              "displayName": "Pain Intensity",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "Coach notes",
              "displayName": "Coach notes",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        1376,
        1024
      ],
      "id": "17a6219b-386e-4369-bd02-39eda12021fb",
      "name": "Append row in sheet",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "3MsYFPOz6gYs3lBk",
          "name": "Google Sheets account"
        }
      }
    },
    {
      "parameters": {
        "rules": {
          "values": [
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 2
                },
                "conditions": [
                  {
                    "leftValue": "={{ $json.lead_stage }}",
                    "rightValue": "Hot",
                    "operator": {
                      "type": "string",
                      "operation": "equals"
                    },
                    "id": "0e3762bf-b17e-495d-a9f7-61904bc8b577"
                  }
                ],
                "combinator": "and"
              },
              "renameOutput": true,
              "outputKey": "Hot"
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 2
                },
                "conditions": [
                  {
                    "id": "8cd1127e-6ed2-4800-8bc8-35a2687fba11",
                    "leftValue": "={{ $json.lead_stage }}",
                    "rightValue": "Warm",
                    "operator": {
                      "type": "string",
                      "operation": "equals",
                      "name": "filter.operator.equals"
                    }
                  }
                ],
                "combinator": "and"
              },
              "renameOutput": true,
              "outputKey": "Warm"
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 2
                },
                "conditions": [
                  {
                    "id": "d378bd21-f613-4a55-ad6e-b9a061adc0e8",
                    "leftValue": "={{ $json.lead_stage }}",
                    "rightValue": "Cold",
                    "operator": {
                      "type": "string",
                      "operation": "equals",
                      "name": "filter.operator.equals"
                    }
                  }
                ],
                "combinator": "and"
              },
              "renameOutput": true,
              "outputKey": "Cold"
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 2
                },
                "conditions": [
                  {
                    "id": "a895fc85-1600-4a1b-94fa-0baaa00ebbbe",
                    "leftValue": "={{ $json.lead_stage }}",
                    "rightValue": "Unqualified",
                    "operator": {
                      "type": "string",
                      "operation": "equals",
                      "name": "filter.operator.equals"
                    }
                  }
                ],
                "combinator": "and"
              },
              "renameOutput": true,
              "outputKey": "Unqualified"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.switch",
      "typeVersion": 3.2,
      "position": [
        480,
        880
      ],
      "id": "531b56a1-8285-4a1b-8376-451eda5afc19",
      "name": "Switch"
    },
    {
      "parameters": {
        "modelId": {
          "__rl": true,
          "value": "gpt-4.1-mini-2025-04-14",
          "mode": "list",
          "cachedResultName": "GPT-4.1-MINI-2025-04-14"
        },
        "messages": {
          "values": [
            {
              "content": "=You are a Lead Qualification AI Assistant for a Coaching Business.\nYou will receive form submissions. Each form contains:\n\nName: {{ $json.Name }}\nEmail: {{ $json.Email }}\nPhone: {{ $json['Whatsapp number'] }}\nBusiness Type: {{ $json['Business type'] }}\nRevenue: {{ $json['Monthly revenue range'] }}\nChallenge: {{ $json['What\\'s your biggest challenge right now?'] }}\nUrgency: {{ $json['How soon do you want to solve this'] }}\nGoal for next 90 days: {{ $json['What is your biggest goal in the next 90 days'] }}\n\nDo all of the following, with high accuracy and short outputs.\n\nIdentify the single core pain behind their challenge. Be precise.\n\nCategorize need type. Use one of these where appropriate, or add one short label: mindset, business, marketing, sales, automation, systems, time management, productivity, relationship, health, fitness, career, personal growth, finance, or other.\n\nDetect readiness level. Choose one: Exploring, Interested, Ready to invest.\n\nSummarize the challenge in one or two lines, plain language, no fluff.\n\nRate pain intensity on a scale of 1 to 5, where 1 is mild frustration and 5 is urgent emotional pain.\n\nDetect emotional sentiment and tone from the language. Choose one of: positive, neutral, negative, stressed, overwhelmed, hopeful, confused.\n\nCount or flag commitment language. Return CommittedWordsCount equal to how many commitment words appear such as ready, committed, hire, invest, start, pay, schedule.\n\nFlag urgency words presence. Return UrgencyFlag true if words like now, immediately, today, this week, urgent, asap, right away appear.\n\nFlag victim mindset language. Return VictimLanguage true if text shows blaming others, helplessness, or repeated externalization such as \"they always\", \"no one\", \"I cannot\", \"it's not my fault\".\n\nFlag action words presence. Return ActionWordsCount for words like applied, tried, launched, tested, implemented.\n\nProduce two numeric scores, on 1 to 5 scale: IntentScore and FitScore. IntentScore measures how likely they are to buy soon. FitScore measures how well they match the coach ICP based on business type, revenue, and challenge.\n\nGive a single micro stage label using this taxonomy: Hot Ready Now, Hot Info Needed, Warm Curious, Warm Price Sensitive, Cold No Ownership, Unqualified Wrong ICP.\n\nGive a single short coach note telling the coach the best first move on the call, one sentence only. Prefer action oriented next step such as book a short audit, send pricing, send case study, or nurture with email sequence.\n\nGive a confidence score 1 to 100 for this qualification, based on how much concrete signal exists in the submission.\n\nReturn the result in this exact format, with each item on its own line and no extra commentary:\n\nName: {{ $json.Name }}\nEmail: {{ $json.Email }}\nProblem Summary: [one or two line summary]\nNeed Type: [category]\nPain Intensity: [1-5]\nSentiment: [positive|neutral|negative|stressed|overwhelmed|hopeful|confused]\nCommittedWordsCount: [number]\nUrgencyFlag: [true|false]\nVictimLanguage: [true|false]\nActionWordsCount: [number]\nReadiness Level: [Exploring|Interested|Ready to invest]\nIntentScore: [1-5]\nFitScore: [1-5]\nMicro Stage: [Hot Ready Now|Hot Info Needed|Warm Curious|Warm Price Sensitive|Cold No Ownership|Unqualified Wrong ICP]\nCoach Notes: [one sentence action step]\nConfidence: [1-100]"
            }
          ]
        },
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.openAi",
      "typeVersion": 1.8,
      "position": [
        64,
        32
      ],
      "id": "b21e792b-7c4e-489f-a48f-113fd690f3f5",
      "name": "Analyze message",
      "credentials": {
        "openAiApi": {
          "id": "8cTwctTGeEBOJeUq",
          "name": "OpenAi account"
        }
      }
    },
    {
      "parameters": {
        "sendTo": "={{ $json.email }}",
        "subject": "New Lead",
        "message": "=<!doctype html>\n<html>\n  <body style=\"margin:0; padding:0; background:#f6f7fb; font-family:Arial, sans-serif;\">\n\n    <div style=\"max-width:600px; margin:30px auto; padding:20px;\">\n\n      <!-- Colorful Box -->\n      <div style=\"background:#ffffff; border-left:6px solid #ff6d5a; padding:22px 26px; border-radius:12px; box-shadow:0 4px 14px rgba(0,0,0,0.08);\">\n\n        <p style=\"font-size:15px; color:#111; margin:0 0 14px 0;\">\n          Hi {{ $json.name }},\n        </p>\n\n        <p style=\"font-size:15px; color:#333; line-height:1.6; margin:0 0 14px 0;\">\n          I read your note about <strong>{{ $('Code in JavaScript').first().json.problem_summary }}</strong> and I am confident we can make progress quickly.\n        </p>\n\n        <p style=\"font-size:15px; color:#333; line-height:1.6; margin:0 0 22px 0;\">\n          Here is my calendar link so we can talk and create your action plan.\n        </p>\n\n        <div style=\"text-align:left; margin-bottom:26px;\">\n          <a href=\"{{calendar_link}}\"\n            style=\"background:#ff6d5a; padding:12px 22px; color:#ffffff; text-decoration:none; \n                   font-size:15px; font-weight:bold; border-radius:6px; display:inline-block;\">\n            Book Call\n          </a>\n        </div>\n\n        <p style=\"font-size:14px; color:#555; margin:0 0 18px 0; line-height:1.5;\">\n          If the time slots do not fit, reply and I will adjust the schedule.\n        </p>\n\n        <p style=\"font-size:12px; color:#999; margin-top:28px;\">\n          Lumoscale Automations\n        </p>\n\n      </div>\n\n    </div>\n\n  </body>\n</html>\n",
        "options": {
          "appendAttribution": false
        }
      },
      "type": "n8n-nodes-base.gmail",
      "typeVersion": 2.1,
      "position": [
        944,
        672
      ],
      "id": "21738e6a-1bf3-408e-a65c-cfa51847a8bb",
      "name": "Hot Lead",
      "webhookId": "60502eb8-e3ed-409e-a9b8-7235cfc5885a",
      "credentials": {
        "gmailOAuth2": {
          "id": "OEcIZm1duf4dQunn",
          "name": "Gmail account 2"
        }
      }
    },
    {
      "parameters": {
        "authentication": "oAuth2",
        "select": "channel",
        "channelId": {
          "__rl": true,
          "value": "C09PV3DSRJQ",
          "mode": "list",
          "cachedResultName": "n8n"
        },
        "messageType": "block",
        "blocksUi": "={\n  \"blocks\": [\n    {\n      \"type\": \"header\",\n      \"text\": {\n        \"type\": \"plain_text\",\n        \"text\": \"ðŸ”¥ Hot Lead Alert\"\n      }\n    },\n    {\n      \"type\": \"section\",\n      \"text\": {\n        \"type\": \"mrkdwn\",\n        \"text\": \"*Name*: {{ $json.name }}\\n*Email*: {{ $json.email }}\\n*Problem*: {{ $('Edit Fields').item.json.problem_summary }}\\n*Need Type*: {{ $('Edit Fields').item.json.need_type }}\\n*Intensity*: {{ $('Edit Fields').item.json.pain_intensity }}\\n*Reason*: {{ $json.reason }}\\n*Coach Notes*: {{ $json.coach_notes }}\"\n      }\n    },\n    {\n      \"type\": \"divider\"\n    }\n  ]\n}\n",
        "text": "New",
        "otherOptions": {
          "includeLinkToWorkflow": false,
          "unfurl_links": false,
          "unfurl_media": false
        }
      },
      "type": "n8n-nodes-base.slack",
      "typeVersion": 2.3,
      "position": [
        944,
        832
      ],
      "id": "cdb3b44e-7aa5-4f25-bef6-aa68d302d133",
      "name": "Hot Slack Message",
      "webhookId": "82b90f26-e9d7-4045-a8a8-cc5473612c04",
      "credentials": {
        "slackOAuth2Api": {
          "id": "Rb7HyhAgq0iIU3TT",
          "name": "Slack account"
        }
      }
    }
  ],
  "connections": {
    "If duplicates Found vs Not Found": {
      "main": [
        [
          {
            "node": "Message a model1",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Update Form Sheet 1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Check duplicates": {
      "main": [
        [
          {
            "node": "If duplicates Found vs Not Found",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Edit Req Fields for Form": {
      "main": [
        [
          {
            "node": "Analyze message",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Code in JavaScript": {
      "main": [
        [
          {
            "node": "Edit Fields",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Edit Fields": {
      "main": [
        [
          {
            "node": "Check duplicates",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Message a model1": {
      "main": [
        [
          {
            "node": "Code in JavaScript1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Code in JavaScript1": {
      "main": [
        [
          {
            "node": "Edit Fields1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Edit Fields1": {
      "main": [
        [
          {
            "node": "Switch",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Switch": {
      "main": [
        [
          {
            "node": "Hot Slack Message",
            "type": "main",
            "index": 0
          },
          {
            "node": "Hot Lead",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Append row in sheet",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Append row in sheet",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Append row in sheet",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Website Signup or Webinar Signup": {
      "main": [
        [
          {
            "node": "Edit Req Fields for Form",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Analyze message": {
      "main": [
        [
          {
            "node": "Code in JavaScript",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Hot Lead": {
      "main": [
        [
          {
            "node": "Append row in sheet",
            "type": "main",
            "index": 0
          }
        ]
      ]
    }
  },
  "settings": {
    "executionOrder": "v1"
  },
  "staticData": null,
  "meta": {
    "templateCredsSetupCompleted": true
  },
  "pinData": {
    "Website Signup or Webinar Signup": [
      {
        "json": {
          "Name": "Vamsi",
          "Email": "vamsikrishna2536@gmail.com",
          "Whatsapp number": 91987654321,
          "Business type": "Agency",
          "Monthly revenue range": "2k",
          "What's your biggest challenge right now?": "Not getting enough leads",
          "How soon do you want to solve this": "Immediate",
          "What is your biggest goal in the next 90 days": "I want to close 3 deals and earn good revenue",
          "submittedAt": "2025-11-16T08:32:46.764+01:00",
          "formMode": "test"
        }
      }
    ],
    "Edit Req Fields for Form": [
      {
        "json": {
          "Name": "Vamsi",
          "Email": "vamsikrishna2536@gmail.com",
          "Whatsapp number": 91987654321,
          "Business type": "Agency",
          "Monthly revenue range": "2k",
          "What's your biggest challenge right now?": "Not getting enough leads",
          "How soon do you want to solve this": "Immediate",
          "What is your biggest goal in the next 90 days": "I want to close 3 deals and earn good revenue"
        }
      }
    ],
    "Code in JavaScript": [
      {
        "json": {
          "index": 0,
          "message": {
            "role": "assistant",
            "content": "Name: Vamsi  \nEmail: vamsikrishna2536@gmail.com  \nProblem Summary: Struggling to generate enough leads to close deals and increase revenue.  \nNeed Type: marketing  \nPain Intensity: 4  \nSentiment: hopeful  \nCommittedWordsCount: 1  \nUrgencyFlag: true  \nVictimLanguage: false  \nActionWordsCount: 0  \nReadiness Level: Ready to invest  \nIntentScore: 4  \nFitScore: 3  \nMicro Stage: Hot Ready Now  \nCoach Notes: Book a short audit call to identify lead generation gaps and quick-win strategies.  \nConfidence: 85",
            "refusal": null,
            "annotations": []
          },
          "logprobs": null,
          "finish_reason": "stop",
          "name": "Vamsi",
          "email": "vamsikrishna2536@gmail.com",
          "problem_summary": "Struggling to generate enough leads to close deals and increase revenue.",
          "need_type": "marketing",
          "pain_intensity": "4",
          "sentiment": "hopeful",
          "committed_words": "1",
          "urgency_flag": "true",
          "victim_language": "false",
          "action_words": "0",
          "readiness_level": "Ready to invest",
          "intent_score": "4",
          "fit_score": "3",
          "micro_stage": "Hot Ready Now",
          "coach_notes": "Book a short audit call to identify lead generation gaps and quick-win strategies.",
          "confidence": "85"
        }
      }
    ],
    "Message a model1": [
      {
        "json": {
          "index": 0,
          "message": {
            "role": "assistant",
            "content": "Name: Vamsi  \nEmail: vamsikrishna2536@gmail.com  \nLead Stage: Hot  \nReason: Vamsi shows strong urgency with a clear problem and readiness to invest. Despite moderate pain intensity, the intent and ownership are high, with no victim language and a hopeful tone. These factors confirm a strong desire to change now.  \nCoach Notes: Prioritize immediate engagement and offer tailored marketing strategies to convert quickly.",
            "refusal": null,
            "annotations": []
          },
          "logprobs": null,
          "finish_reason": "stop"
        }
      }
    ],
    "Code in JavaScript1": [
      {
        "json": {
          "index": 0,
          "message": {
            "role": "assistant",
            "content": "Name: Vamsi  \nEmail: vamsikrishna2536@gmail.com  \nLead Stage: Hot  \nReason: Vamsi shows strong urgency with a clear problem and readiness to invest. Despite moderate pain intensity, the intent and ownership are high, with no victim language and a hopeful tone. These factors confirm a strong desire to change now.  \nCoach Notes: Prioritize immediate engagement and offer tailored marketing strategies to convert quickly.",
            "refusal": null,
            "annotations": []
          },
          "logprobs": null,
          "finish_reason": "stop",
          "name": "Vamsi",
          "email": "vamsikrishna2536@gmail.com",
          "lead_stage": "Hot",
          "reason": "Vamsi shows strong urgency with a clear problem and readiness to invest. Despite moderate pain intensity, the intent and ownership are high, with no victim language and a hopeful tone. These factors confirm a strong desire to change now.",
          "coach_notes": "Prioritize immediate engagement and offer tailored marketing strategies to convert quickly."
        }
      }
    ],
    "Edit Fields1": [
      {
        "json": {
          "name": "Vamsi",
          "email": "vamsikrishna2536@gmail.com",
          "lead_stage": "Hot",
          "reason": "Vamsi shows strong urgency with a clear problem and readiness to invest. Despite moderate pain intensity, the intent and ownership are high, with no victim language and a hopeful tone. These factors confirm a strong desire to change now.",
          "coach_notes": "Prioritize immediate engagement and offer tailored marketing strategies to convert quickly."
        }
      }
    ],
    "Analyze message": [
      {
        "json": {
          "index": 0,
          "message": {
            "role": "assistant",
            "content": "Name: Vamsi  \nEmail: vamsikrishna2536@gmail.com  \nProblem Summary: Struggling to generate enough leads to close deals and increase revenue.  \nNeed Type: marketing  \nPain Intensity: 4  \nSentiment: hopeful  \nCommittedWordsCount: 1  \nUrgencyFlag: true  \nVictimLanguage: false  \nActionWordsCount: 0  \nReadiness Level: Ready to invest  \nIntentScore: 4  \nFitScore: 3  \nMicro Stage: Hot Ready Now  \nCoach Notes: Book a short audit call to identify lead generation gaps and quick-win strategies.  \nConfidence: 85",
            "refusal": null,
            "annotations": []
          },
          "logprobs": null,
          "finish_reason": "stop"
        }
      }
    ],
    "If duplicates Found vs Not Found": [
      {
        "json": {}
      }
    ],
    "Check duplicates": [
      {
        "json": {}
      }
    ],
    "Edit Fields": [
      {
        "json": {
          "name": "Vamsi",
          "email": "vamsikrishna2536@gmail.com",
          "problem_summary": "Struggling to generate enough leads to close deals and increase revenue.",
          "need_type": "marketing",
          "pain_intensity": "4",
          "sentiment": "hopeful",
          "urgency_flag": "true",
          "intent_score": "4",
          "coach_notes": "Book a short audit call to identify lead generation gaps and quick-win strategies.",
          "confidence": "85"
        }
      }
    ]
  },
  "versionId": "8ffb15b3-eabc-4161-9b4c-53d69b50a126",
  "triggerCount": 0,
  "shared": [
    {
      "createdAt": "2025-11-16T07:33:05.836Z",
      "updatedAt": "2025-11-16T07:33:05.836Z",
      "role": "workflow:owner",
      "workflowId": "C8Mvab5ljKseAAcA",
      "projectId": "VDyoKZWt3i5eAZSO"
    }
  ],
  "tags": []
}