{
  "createdAt": "2025-10-10T14:50:05.273Z",
  "updatedAt": "2025-10-24T18:09:55.000Z",
  "id": "aibiU40wl6Pk0Gm3",
  "name": "Post gres and Supabase",
  "active": false,
  "isArchived": false,
  "nodes": [
    {
      "parameters": {
        "public": true,
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.chatTrigger",
      "typeVersion": 1.3,
      "position": [
        -848,
        -176
      ],
      "id": "541d3421-d829-45bd-8812-dea7786b79c9",
      "name": "When chat message received",
      "webhookId": "9ae600ec-6050-478a-b8a5-33749cd249fa"
    },
    {
      "parameters": {
        "options": {
          "systemMessage": "=You are a helpful automation assistant with access to 3 tools:\n1. Google_sheets ‚Äî main data source (must always be called first)\n2. Gmail ‚Äî used to send follow-up or reminder emails\n3. Google_calender ‚Äî used to create or update calendar events\n\n‚öôÔ∏è Core Behavior:\n- You MUST always call Google_sheets first in every run to fetch or update data.\n- Never proceed to Gmail or Google_calender actions without first using Google_sheets.\n- Use the data from Google_sheets to decide next actions.\n\nüìã Workflow Logic:\n1. Call Google_sheets ‚Üí get relevant data (e.g., leads, meetings, tasks, reminders).\n2. Based on that data:\n   - If a meeting or event is found ‚Üí call Google_calender to create or update it.\n   - If a follow-up, reminder, or update email is needed ‚Üí call Gmail to send it.\n3. After completing the actions ‚Üí update Google_sheets again to log the status or any new details.\n\nüß† Guidelines:\n- Always start with Google_sheets ‚Üí read or write data.\n- Use Gmail and Google_calender only when required by the data.\n- End by updating Google_sheets with what actions you performed.\n- Never skip Google_sheets. It must run at the start and ideally at the end of every workflow."
        }
      },
      "type": "@n8n/n8n-nodes-langchain.agent",
      "typeVersion": 2.2,
      "position": [
        -464,
        -192
      ],
      "id": "22625952-71cf-495f-b839-27b726a92f79",
      "name": "AI Agent"
    },
    {
      "parameters": {
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.lmChatGoogleGemini",
      "typeVersion": 1,
      "position": [
        -560,
        80
      ],
      "id": "86e9acf3-511a-4938-a493-48a37445cd86",
      "name": "Google Gemini Chat Model",
      "credentials": {
        "googlePalmApi": {
          "id": "Gq3qNdXZmlzVb7Jg",
          "name": "Google Gemini(PaLM) Api account"
        }
      }
    },
    {
      "parameters": {
        "documentId": {
          "__rl": true,
          "value": "19USjdma0s8PhGgZR_7VsbHbvOAD7j9Tk7zRBt0qJwwA",
          "mode": "list",
          "cachedResultName": "Cold Calling Sheet Lumoscale.AI",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/19USjdma0s8PhGgZR_7VsbHbvOAD7j9Tk7zRBt0qJwwA/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": "gid=0",
          "mode": "list",
          "cachedResultName": "Cold Calling List",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/19USjdma0s8PhGgZR_7VsbHbvOAD7j9Tk7zRBt0qJwwA/edit#gid=0"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheetsTool",
      "typeVersion": 4.7,
      "position": [
        -16,
        80
      ],
      "id": "e249b00d-b2b8-495f-94d4-f3801aaa1ef7",
      "name": "Google_sheets",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "3MsYFPOz6gYs3lBk",
          "name": "Google Sheets account"
        }
      }
    },
    {
      "parameters": {
        "sendTo": "vamsivk1465@gmail.com",
        "subject": "={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('Subject', ``, 'string') }}",
        "emailType": "text",
        "message": "={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('Message', ``, 'string') }}",
        "options": {}
      },
      "type": "n8n-nodes-base.gmailTool",
      "typeVersion": 2.1,
      "position": [
        -144,
        96
      ],
      "id": "ce893481-788f-4fa1-a34a-6973b5dbeb13",
      "name": "Gmail",
      "webhookId": "82103401-4080-46e8-bea4-66417a30fc75",
      "credentials": {
        "gmailOAuth2": {
          "id": "UbWO1LFfZ6s8MzMA",
          "name": "Gmail account"
        }
      }
    },
    {
      "parameters": {
        "calendar": {
          "__rl": true,
          "value": "vamsivk1465@gmail.com",
          "mode": "list",
          "cachedResultName": "vamsivk1465@gmail.com"
        },
        "start": "={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('Start', ``, 'string') }}",
        "end": "={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('End', ``, 'string') }}",
        "additionalFields": {
          "summary": "={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('Summary', ``, 'string') }}"
        }
      },
      "type": "n8n-nodes-base.googleCalendarTool",
      "typeVersion": 1.3,
      "position": [
        -272,
        112
      ],
      "id": "b278e113-ed9d-4a1f-915c-5377ccd1322f",
      "name": "Google_calender",
      "credentials": {
        "googleCalendarOAuth2Api": {
          "id": "g4VAMKMrPf3B63WZ",
          "name": "Google Calendar account"
        }
      }
    },
    {
      "parameters": {
        "pollTimes": {
          "item": [
            {
              "mode": "everyMinute"
            }
          ]
        },
        "filters": {}
      },
      "type": "n8n-nodes-base.gmailTrigger",
      "typeVersion": 1.3,
      "position": [
        -864,
        32
      ],
      "id": "18cb1780-e964-49ca-b2b4-40cbeeb86b68",
      "name": "Gmail Trigger",
      "credentials": {
        "gmailOAuth2": {
          "id": "UbWO1LFfZ6s8MzMA",
          "name": "Gmail account"
        }
      }
    },
    {
      "parameters": {
        "contextWindowLength": 10
      },
      "type": "@n8n/n8n-nodes-langchain.memoryPostgresChat",
      "typeVersion": 1.3,
      "position": [
        -400,
        96
      ],
      "id": "b943d286-d40e-4ec7-9c74-879dd4afbd91",
      "name": "Postgres Chat Memory",
      "credentials": {
        "postgres": {
          "id": "WQMrtWk4rds1X92G",
          "name": "Postgres account"
        }
      }
    },
    {
      "parameters": {
        "mode": "retrieve-as-tool",
        "toolDescription": "This tool must be automatically called every time the AI agent runs, regardless of the task or trigger. It ensures continuous access to essential data and updates required for the agent‚Äôs execution. The tool should always remain active in the workflow, serving as a constant data source or integration layer for the agent‚Äôs operations.",
        "tableName": {
          "__rl": true,
          "value": "n8n agent",
          "mode": "list",
          "cachedResultName": "n8n agent"
        },
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.vectorStoreSupabase",
      "typeVersion": 1.3,
      "position": [
        128,
        64
      ],
      "id": "4adf1a9c-f5e7-495a-96aa-cc78c8ea5472",
      "name": "Supabase Vector Store",
      "credentials": {
        "supabaseApi": {
          "id": "gz6bPMoznQqKSorL",
          "name": "Supabase account"
        }
      }
    },
    {
      "parameters": {
        "mode": "insert",
        "tableName": {
          "__rl": true,
          "value": "n8n agent",
          "mode": "list",
          "cachedResultName": "n8n agent"
        },
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.vectorStoreSupabase",
      "typeVersion": 1.3,
      "position": [
        -608,
        304
      ],
      "id": "822e1e67-096f-4cce-b870-93cf942af696",
      "name": "Supabase Vector Store1",
      "credentials": {
        "supabaseApi": {
          "id": "gz6bPMoznQqKSorL",
          "name": "Supabase account"
        }
      }
    },
    {
      "parameters": {
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.embeddingsOpenAi",
      "typeVersion": 1.2,
      "position": [
        -608,
        512
      ],
      "id": "e1f678c2-f3f5-4158-9017-7d373cdbe692",
      "name": "Embeddings OpenAI",
      "credentials": {
        "openAiApi": {
          "id": "8cTwctTGeEBOJeUq",
          "name": "OpenAi account"
        }
      }
    },
    {
      "parameters": {
        "dataType": "binary",
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.documentDefaultDataLoader",
      "typeVersion": 1.1,
      "position": [
        -464,
        496
      ],
      "id": "9ed8e666-7780-4ef5-90a6-0084a939798b",
      "name": "Default Data Loader"
    },
    {
      "parameters": {
        "pollTimes": {
          "item": [
            {
              "mode": "everyMinute"
            }
          ]
        },
        "triggerOn": "specificFolder",
        "folderToWatch": {
          "__rl": true,
          "value": "1Os2WjIMwVjx-FlO8xEDJiqen7RON9xrb",
          "mode": "list",
          "cachedResultName": "Invoice",
          "cachedResultUrl": "https://drive.google.com/drive/folders/1Os2WjIMwVjx-FlO8xEDJiqen7RON9xrb"
        },
        "event": "fileCreated",
        "options": {}
      },
      "type": "n8n-nodes-base.googleDriveTrigger",
      "typeVersion": 1,
      "position": [
        -800,
        304
      ],
      "id": "77ed82c9-254d-45d0-bf9e-92405c1a01af",
      "name": "Google Drive Trigger",
      "credentials": {
        "googleDriveOAuth2Api": {
          "id": "pqwDBXzX6aAkWb7p",
          "name": "Google Drive account"
        }
      }
    },
    {
      "parameters": {
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.embeddingsOpenAi",
      "typeVersion": 1.2,
      "position": [
        320,
        288
      ],
      "id": "f1e54670-db03-4804-91c2-e608d820f155",
      "name": "Embeddings OpenAI1",
      "credentials": {
        "openAiApi": {
          "id": "8cTwctTGeEBOJeUq",
          "name": "OpenAi account"
        }
      }
    }
  ],
  "connections": {
    "When chat message received": {
      "main": [
        [
          {
            "node": "AI Agent",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Google Gemini Chat Model": {
      "ai_languageModel": [
        [
          {
            "node": "AI Agent",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ]
    },
    "AI Agent": {
      "main": [
        []
      ]
    },
    "Google_sheets": {
      "ai_tool": [
        [
          {
            "node": "AI Agent",
            "type": "ai_tool",
            "index": 0
          }
        ]
      ]
    },
    "Gmail": {
      "ai_tool": [
        [
          {
            "node": "AI Agent",
            "type": "ai_tool",
            "index": 0
          }
        ]
      ]
    },
    "Google_calender": {
      "ai_tool": [
        [
          {
            "node": "AI Agent",
            "type": "ai_tool",
            "index": 0
          }
        ]
      ]
    },
    "Gmail Trigger": {
      "main": [
        [
          {
            "node": "AI Agent",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Postgres Chat Memory": {
      "ai_memory": [
        [
          {
            "node": "AI Agent",
            "type": "ai_memory",
            "index": 0
          }
        ]
      ]
    },
    "Supabase Vector Store": {
      "ai_tool": [
        [
          {
            "node": "AI Agent",
            "type": "ai_tool",
            "index": 0
          }
        ]
      ]
    },
    "Embeddings OpenAI": {
      "ai_embedding": [
        [
          {
            "node": "Supabase Vector Store1",
            "type": "ai_embedding",
            "index": 0
          }
        ]
      ]
    },
    "Default Data Loader": {
      "ai_document": [
        [
          {
            "node": "Supabase Vector Store1",
            "type": "ai_document",
            "index": 0
          }
        ]
      ]
    },
    "Google Drive Trigger": {
      "main": [
        [
          {
            "node": "Supabase Vector Store1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Embeddings OpenAI1": {
      "ai_embedding": [
        [
          {
            "node": "Supabase Vector Store",
            "type": "ai_embedding",
            "index": 0
          }
        ]
      ]
    }
  },
  "settings": {
    "executionOrder": "v1"
  },
  "staticData": null,
  "meta": {
    "templateCredsSetupCompleted": true
  },
  "pinData": {},
  "versionId": "55df4bd8-3b97-40a0-8f53-fe4e5cc60051",
  "triggerCount": 0,
  "shared": [
    {
      "createdAt": "2025-10-10T14:50:05.277Z",
      "updatedAt": "2025-10-10T14:50:05.277Z",
      "role": "workflow:owner",
      "workflowId": "aibiU40wl6Pk0Gm3",
      "projectId": "VDyoKZWt3i5eAZSO"
    }
  ],
  "tags": []
}