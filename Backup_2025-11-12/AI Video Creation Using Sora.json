{
  "createdAt": "2025-11-02T11:24:26.704Z",
  "updatedAt": "2025-11-07T08:41:17.000Z",
  "id": "yvmPhzXvlJPPuANL",
  "name": "AI Video Creation Using Sora",
  "active": false,
  "isArchived": false,
  "nodes": [
    {
      "parameters": {
        "formTitle": "UGC",
        "formDescription": "High quality",
        "formFields": {
          "values": [
            {
              "fieldLabel": "Upload product",
              "fieldType": "file",
              "acceptFileTypes": ".jpg, .png, .jpeg",
              "requiredField": true
            },
            {
              "fieldLabel": "Notes"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.formTrigger",
      "typeVersion": 2.3,
      "position": [
        -576,
        -128
      ],
      "id": "4eb5471d-01b8-4c27-bc27-7660dc2f37ec",
      "name": "On form submission",
      "webhookId": "ddad5b04-b2e7-493d-84fd-97c4a05f8678"
    },
    {
      "parameters": {
        "method": "POST",
        "url": "https://api.openai.com/v1/videos",
        "authentication": "predefinedCredentialType",
        "nodeCredentialType": "openAiApi",
        "sendBody": true,
        "contentType": "multipart-form-data",
        "bodyParameters": {
          "parameters": [
            {
              "name": "model",
              "value": "sora-2"
            },
            {
              "name": "prompt",
              "value": "={{ $('AI Agent').item.json.output }}"
            },
            {
              "name": "seconds",
              "value": "12"
            },
            {
              "name": "size",
              "value": "720x1280"
            },
            {
              "parameterType": "formBinaryData",
              "name": "input_reference",
              "inputDataFieldName": "image"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [
        528,
        -128
      ],
      "id": "458442c6-e85d-4b44-8739-faf483420ef5",
      "name": "HTTP Request",
      "credentials": {
        "openAiApi": {
          "id": "8cTwctTGeEBOJeUq",
          "name": "OpenAi account"
        }
      }
    },
    {
      "parameters": {
        "amount": 2,
        "unit": "minutes"
      },
      "type": "n8n-nodes-base.wait",
      "typeVersion": 1.1,
      "position": [
        784,
        -128
      ],
      "id": "69d0961f-38e9-43d7-afdc-a42413333a83",
      "name": "Wait",
      "webhookId": "ade9f152-dbf8-4821-87e3-a046e1195039"
    },
    {
      "parameters": {
        "url": "=https://api.openai.com/v1/videos/{{ $json.id }}",
        "authentication": "predefinedCredentialType",
        "nodeCredentialType": "openAiApi",
        "options": {}
      },
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [
        992,
        -128
      ],
      "id": "a8fdac8c-7cd6-4c10-b720-a1d598878f55",
      "name": "HTTP Request1",
      "credentials": {
        "openAiApi": {
          "id": "8cTwctTGeEBOJeUq",
          "name": "OpenAi account"
        }
      }
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict",
            "version": 2
          },
          "conditions": [
            {
              "id": "ab5c5501-4bd6-42c4-b19f-636dab5f917c",
              "leftValue": "={{ $json.status }}",
              "rightValue": "in_progress",
              "operator": {
                "type": "string",
                "operation": "equals"
              }
            }
          ],
          "combinator": "and"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.if",
      "typeVersion": 2.2,
      "position": [
        1200,
        -128
      ],
      "id": "56154879-ae9d-4d02-bf8b-4d807d40442e",
      "name": "If"
    },
    {
      "parameters": {
        "url": "=https://api.openai.com/v1/videos/{{ $json.id }}/content",
        "authentication": "predefinedCredentialType",
        "nodeCredentialType": "openAiApi",
        "options": {}
      },
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [
        1472,
        -48
      ],
      "id": "0795130f-c0a6-4c30-b9ac-5d2abd2d1b48",
      "name": "HTTP Request2",
      "credentials": {
        "openAiApi": {
          "id": "8cTwctTGeEBOJeUq",
          "name": "OpenAi account"
        }
      }
    },
    {
      "parameters": {
        "operation": "resize",
        "dataPropertyName": "Upload_product",
        "width": 720,
        "height": 1280,
        "resizeOption": "ignoreAspectRatio",
        "options": {}
      },
      "type": "n8n-nodes-base.editImage",
      "typeVersion": 1,
      "position": [
        -368,
        -128
      ],
      "id": "e8df3be4-0ce6-4c20-9bc7-b43711007392",
      "name": "Edit Image"
    },
    {
      "parameters": {
        "jsCode": "// Get all items from the \"Edit Image\" node\nconst editImageItems = $items(\"Edit Image\", 0, 0);\n\nif (!editImageItems || editImageItems.length === 0) {\n  throw new Error(\"No items found from Edit Image node\");\n}\n\n// Get the binary data from the edited image\nconst binary = editImageItems[0].binary?.data || editImageItems[0].binary?.image || editImageItems[0].binary?.Upload_product;\n\nif (!binary) {\n  throw new Error(\"No binary file found in Edit Image node output\");\n}\n\n// Return in proper structure for next node (like OpenAI Analyze Image)\nreturn [\n  {\n    json: {},\n    binary: {\n      image: binary\n    }\n  }\n];\n"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        352,
        -128
      ],
      "id": "c92c2bce-8bc1-4ca5-84fa-ef841f87d4df",
      "name": "Code in JavaScript"
    },
    {
      "parameters": {
        "resource": "image",
        "operation": "analyze",
        "modelId": {
          "__rl": true,
          "value": "gpt-4o",
          "mode": "list",
          "cachedResultName": "GPT-4O"
        },
        "text": "Describe the product in the image",
        "inputType": "base64",
        "binaryPropertyName": "Upload_product",
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.openAi",
      "typeVersion": 1.8,
      "position": [
        -272,
        -640
      ],
      "id": "9a786722-b14f-4c6d-b84f-1dc2de66b3b6",
      "name": "Analyze image",
      "credentials": {
        "openAiApi": {
          "id": "8cTwctTGeEBOJeUq",
          "name": "OpenAi account"
        }
      }
    },
    {
      "parameters": {
        "model": {
          "__rl": true,
          "mode": "list",
          "value": "gpt-4.1-mini"
        },
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.lmChatOpenAi",
      "typeVersion": 1.2,
      "position": [
        -32,
        80
      ],
      "id": "04ae64f3-d4b5-476c-98ac-6a0479c64cb0",
      "name": "OpenAI Chat Model",
      "credentials": {
        "openAiApi": {
          "id": "8cTwctTGeEBOJeUq",
          "name": "OpenAi account"
        }
      }
    },
    {
      "parameters": {
        "promptType": "define",
        "text": "=Product image Description: {{ $json.content.parts[0].text }}\n\nNotes: {{ $('On form submission').item.json.Notes }}",
        "options": {
          "systemMessage": "=You are a creative UGC ad prompt generator.  \nYour task is to generate a **single 12-second influencer-style UGC ad scene** for a product, based on its image description and notes.\n\nGuidelines:  \n- Focus on one clear, engaging scene only.  \n- Make it feel natural, unscripted, and casual—like something a real influencer would post on Stories or Reels.  \n- The vibe should be confident but not salesy. Think effortless recommendation, not a commercial.  \n- **The influencer must visibly hold, touch, or interact with the product at some point in the scene. Thats the point**  \n- Use **realistic, everyday settings** that match the product category (e.g., bathroom for skincare, bedroom for fashion try-ons, kitchen for food, living room for lifestyle, etc.).  \n- The influencer should be **dressed in stylish, on-trend clothing** that fits the niche. For example:  \n  - Skincare: nightwear, crop top and shorts, robe, or clean minimalist outfits.  \n  - Fashion: trendy streetwear or casual chic.  \n  - Lifestyle: relaxed but well-styled outfits.  \n- Hair should look influencer-like: trendy, well-groomed, or styled to match the vibe.  \n- Include the setting, action, and mood in a vivid but believable way.  \n- Add a short **audio suggestion** (e.g., casual VO tone, trending music, ambient sound).  \n- Avoid forced lines, exaggerated emotions, or zoom-ins.  \n- Don’t mention cameras, filming, or production instructions.  \n- Output only the scene description and audio suggestion. No labels or formatting.\n\nOutput:  \n[Scene description + audio suggestion]"
        }
      },
      "type": "@n8n/n8n-nodes-langchain.agent",
      "typeVersion": 2.2,
      "position": [
        48,
        -128
      ],
      "id": "6b421ae9-ea9b-4a75-9180-ac494521ded9",
      "name": "AI Agent"
    },
    {
      "parameters": {
        "resource": "image",
        "operation": "analyze",
        "modelId": {
          "__rl": true,
          "value": "models/gemini-2.5-flash",
          "mode": "list",
          "cachedResultName": "models/gemini-2.5-flash"
        },
        "text": "Describe what's is in the image",
        "inputType": "binary",
        "binaryPropertyName": "Upload_product",
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.googleGemini",
      "typeVersion": 1,
      "position": [
        -176,
        -128
      ],
      "id": "94fd7efa-6cdb-4cca-b5bd-f3914b906964",
      "name": "Analyze image1",
      "credentials": {
        "googlePalmApi": {
          "id": "Gq3qNdXZmlzVb7Jg",
          "name": "Google Gemini(PaLM) Api account"
        }
      }
    },
    {
      "parameters": {
        "driveId": {
          "__rl": true,
          "mode": "list",
          "value": "My Drive"
        },
        "folderId": {
          "__rl": true,
          "mode": "list",
          "value": "root",
          "cachedResultName": "/ (Root folder)"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleDrive",
      "typeVersion": 3,
      "position": [
        1680,
        -48
      ],
      "id": "8a0fec67-29fb-4ae8-b533-1ef8de0746fe",
      "name": "Upload file",
      "credentials": {
        "googleDriveOAuth2Api": {
          "id": "pqwDBXzX6aAkWb7p",
          "name": "Google Drive account"
        }
      }
    }
  ],
  "connections": {
    "On form submission": {
      "main": [
        [
          {
            "node": "Edit Image",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "HTTP Request": {
      "main": [
        [
          {
            "node": "HTTP Request1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Wait": {
      "main": [
        [
          {
            "node": "HTTP Request1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "HTTP Request1": {
      "main": [
        [
          {
            "node": "If",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "If": {
      "main": [
        [
          {
            "node": "Wait",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "HTTP Request2",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Edit Image": {
      "main": [
        [
          {
            "node": "Analyze image1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Code in JavaScript": {
      "main": [
        [
          {
            "node": "HTTP Request",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Analyze image": {
      "main": [
        []
      ]
    },
    "AI Agent": {
      "main": [
        [
          {
            "node": "Code in JavaScript",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "OpenAI Chat Model": {
      "ai_languageModel": [
        [
          {
            "node": "AI Agent",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ]
    },
    "Analyze image1": {
      "main": [
        [
          {
            "node": "AI Agent",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "HTTP Request2": {
      "main": [
        [
          {
            "node": "Upload file",
            "type": "main",
            "index": 0
          }
        ]
      ]
    }
  },
  "settings": {
    "executionOrder": "v1"
  },
  "staticData": null,
  "meta": {
    "templateCredsSetupCompleted": true
  },
  "pinData": {
    "Analyze image": [
      {
        "json": {
          "content": "The product in the image is a white bottle of \"phykology\" skincare. It is labeled as \"Bright Tomorrow Multi Tasking Toner\" and is described as \"Song of the Island\". The design is minimalistic, with simple black text on the bottle."
        }
      }
    ]
  },
  "versionId": "d6efa74e-0232-4b7a-9cf2-692e0bd73140",
  "triggerCount": 0,
  "shared": [
    {
      "createdAt": "2025-11-02T11:24:26.707Z",
      "updatedAt": "2025-11-02T11:24:26.707Z",
      "role": "workflow:owner",
      "workflowId": "yvmPhzXvlJPPuANL",
      "projectId": "VDyoKZWt3i5eAZSO"
    }
  ],
  "tags": []
}